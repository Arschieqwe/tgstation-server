<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.Watchdog.WatchdogBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;4.16.2</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html">Watchdog</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.Watchdog.WatchdogBase Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Base class for <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>s.  
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.Watchdog.WatchdogBase:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map">
<area shape="rect" title="Base class for IWatchdogs." alt="" coords="319,155,545,196"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html" title="A IWatchdog that manages one server." alt="" coords="319,244,545,285"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers." alt="" coords="237,80,321,107"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,5,117,32"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="142,5,269,32"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="293,5,411,32"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html" title="Handler for an instance being renamed." alt="" coords="436,5,559,32"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html" title="Handles Commands.ICommands that map to those defined in a IChatTrackingContext." alt="" coords="345,80,519,107"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts." alt="" coords="543,80,657,107"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html" title="A IWatchdog that, instead of killing servers for updates, uses the wonders of symlinks to swap out ch..." alt="" coords="319,333,545,375"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_posix_watchdog.html" title="A variant of the WindowsWatchdog that works on POSIX systems." alt="" coords="319,423,545,464"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.Watchdog.WatchdogBase:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map" id="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map">
<area shape="rect" title="Base class for IWatchdogs." alt="" coords="693,395,920,437"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers." alt="" coords="269,76,353,103"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="13,13,125,40"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html" title="Manages the runtime of Jobs." alt="" coords="219,6,402,47"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="5,72,132,99"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="9,123,128,149"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html" title="Handler for an instance being renamed." alt="" coords="7,173,130,200"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html" title="Handles Commands.ICommands that map to those defined in a IChatTrackingContext." alt="" coords="223,127,398,153"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts." alt="" coords="254,177,367,204"/>
<area shape="rect" title=" " alt="" coords="290,228,331,255"/>
<area shape="rect" title=" " alt="" coords="228,279,393,305"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="197,330,424,371"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html" title="Represents the lifetime of a IRestartHandler registration." alt="" coords="220,395,401,437"/>
<area shape="rect" href="class_i_disposable.html" title=" " alt="" coords="23,403,114,429"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="227,461,395,502"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html" title="Factory for creating IRemoteDeploymentManagers." alt="" coords="181,525,440,581"/>
<area shape="rect" title=" " alt="" coords="287,605,334,632"/>
<area shape="rect" title=" " alt="" coords="225,656,396,683"/>
<area shape="rect" title=" " alt="" coords="285,707,336,733"/>
<area shape="rect" title=" " alt="" coords="251,757,370,784"/>
<area shape="rect" title=" " alt="" coords="291,808,330,835"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6f69db8c3ceae298404f5d8d5a7312b3"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a> ()</td></tr>
<tr class="separator:a6f69db8c3ceae298404f5d8d5a7312b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a390fcde5ed6ed30d6e5b5b2ebc8273dc"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a390fcde5ed6ed30d6e5b5b2ebc8273dc">ChangeSettings</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a390fcde5ed6ed30d6e5b5b2ebc8273dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters the active server is using.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a390fcde5ed6ed30d6e5b5b2ebc8273dc">More...</a><br /></td></tr>
<tr class="separator:a390fcde5ed6ed30d6e5b5b2ebc8273dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd81003b2e6d64f3f8240a61d44f112e"><td class="memItemLeft" align="right" valign="top">async Task&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afd81003b2e6d64f3f8240a61d44f112e">HandleChatCommand</a> (string commandName, string arguments, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a> sender, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:afd81003b2e6d64f3f8240a61d44f112e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a chat command.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afd81003b2e6d64f3f8240a61d44f112e">More...</a><br /></td></tr>
<tr class="separator:afd81003b2e6d64f3f8240a61d44f112e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af619caa031c183aa1aa5adbcf11a3434"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434">Launch</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af619caa031c183aa1aa5adbcf11a3434"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434">More...</a><br /></td></tr>
<tr class="separator:af619caa031c183aa1aa5adbcf11a3434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf696fd100732f5b9eb8900e81895bf0"><td class="memItemLeft" align="right" valign="top">virtual async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aaf696fd100732f5b9eb8900e81895bf0">ResetRebootState</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aaf696fd100732f5b9eb8900e81895bf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels pending graceful actions.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aaf696fd100732f5b9eb8900e81895bf0">More...</a><br /></td></tr>
<tr class="separator:aaf696fd100732f5b9eb8900e81895bf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d65944835fca058d4a4be46eaf81bd"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd">Restart</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a39d65944835fca058d4a4be46eaf81bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restarts the watchdog.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd">More...</a><br /></td></tr>
<tr class="separator:a39d65944835fca058d4a4be46eaf81bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae30d4b582b04eb7c3ef3c5d848429bbd"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:ae30d4b582b04eb7c3ef3c5d848429bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f7ac000da0491494324db1dce544a0"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad1f7ac000da0491494324db1dce544a0">StopAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:ad1f7ac000da0491494324db1dce544a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a9acdffdc9e7cd176f803b23e97ff4"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4">Terminate</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a49a9acdffdc9e7cd176f803b23e97ff4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the watchdog.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4">More...</a><br /></td></tr>
<tr class="separator:a49a9acdffdc9e7cd176f803b23e97ff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e4642f1b29fff6e830c654384f8813f"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0e4642f1b29fff6e830c654384f8813f">HandleRestart</a> (Version updateVersion, bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a0e4642f1b29fff6e830c654384f8813f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a restart of the server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0e4642f1b29fff6e830c654384f8813f">More...</a><br /></td></tr>
<tr class="separator:a0e4642f1b29fff6e830c654384f8813f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ca371ec92c273cd6b3ab2f6931f8a65"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3ca371ec92c273cd6b3ab2f6931f8a65">InstanceRenamed</a> (string newInstanceName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a3ca371ec92c273cd6b3ab2f6931f8a65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3ca371ec92c273cd6b3ab2f6931f8a65">More...</a><br /></td></tr>
<tr class="separator:a3ca371ec92c273cd6b3ab2f6931f8a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8489bee0d96bcaf87eba19adee17149"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149">CreateDump</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad8489bee0d96bcaf87eba19adee17149"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to create a process dump for DreamDaemon.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149">More...</a><br /></td></tr>
<tr class="separator:ad8489bee0d96bcaf87eba19adee17149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa6b3f10617f13ae7af79317594020e3"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afa6b3f10617f13ae7af79317594020e3">Launch</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:afa6b3f10617f13ae7af79317594020e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afa6b3f10617f13ae7af79317594020e3">More...</a><br /></td></tr>
<tr class="separator:afa6b3f10617f13ae7af79317594020e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afab0aa088dc77e54e978c730645d8d00"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afab0aa088dc77e54e978c730645d8d00">ChangeSettings</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:afab0aa088dc77e54e978c730645d8d00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters the active server is using.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afab0aa088dc77e54e978c730645d8d00">More...</a><br /></td></tr>
<tr class="separator:afab0aa088dc77e54e978c730645d8d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e80e3751764c584151e51f4395efbf5"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0e80e3751764c584151e51f4395efbf5">Restart</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a0e80e3751764c584151e51f4395efbf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restarts the watchdog.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0e80e3751764c584151e51f4395efbf5">More...</a><br /></td></tr>
<tr class="separator:a0e80e3751764c584151e51f4395efbf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fded5c4b8aeb291ad5b1797a25eee14"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7fded5c4b8aeb291ad5b1797a25eee14">Terminate</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a7fded5c4b8aeb291ad5b1797a25eee14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the watchdog.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7fded5c4b8aeb291ad5b1797a25eee14">More...</a><br /></td></tr>
<tr class="separator:a7fded5c4b8aeb291ad5b1797a25eee14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2859725d1805d6655be14566f9edcf00"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a2859725d1805d6655be14566f9edcf00">ResetRebootState</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2859725d1805d6655be14566f9edcf00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels pending graceful actions.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a2859725d1805d6655be14566f9edcf00">More...</a><br /></td></tr>
<tr class="separator:a2859725d1805d6655be14566f9edcf00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f97ee77ae892e162173be45d7522f7"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a67f97ee77ae892e162173be45d7522f7">CreateDump</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a67f97ee77ae892e162173be45d7522f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to create a process dump for DreamDaemon.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a67f97ee77ae892e162173be45d7522f7">More...</a><br /></td></tr>
<tr class="separator:a67f97ee77ae892e162173be45d7522f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac217567aa6bd7e43c8cfd976eee05aac"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac">HandleEvent</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string &gt; parameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ac217567aa6bd7e43c8cfd976eee05aac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em> .  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac">More...</a><br /></td></tr>
<tr class="separator:ac217567aa6bd7e43c8cfd976eee05aac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69fed1472e47f53392237645d5d65d7a"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a69fed1472e47f53392237645d5d65d7a">InstanceRenamed</a> (string newInstanceName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a69fed1472e47f53392237645d5d65d7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a69fed1472e47f53392237645d5d65d7a">More...</a><br /></td></tr>
<tr class="separator:a69fed1472e47f53392237645d5d65d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70ad02e50d142d4700bf372875860774"><td class="memItemLeft" align="right" valign="top">Task&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#a70ad02e50d142d4700bf372875860774">HandleChatCommand</a> (string commandName, string arguments, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a> sender, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a70ad02e50d142d4700bf372875860774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a chat command.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#a70ad02e50d142d4700bf372875860774">More...</a><br /></td></tr>
<tr class="separator:a70ad02e50d142d4700bf372875860774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03028e6082b0e88e2d46c4c9ea0e7af7"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a03028e6082b0e88e2d46c4c9ea0e7af7">HandleRestart</a> (Version updateVersion, bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a03028e6082b0e88e2d46c4c9ea0e7af7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a restart of the server.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a03028e6082b0e88e2d46c4c9ea0e7af7">More...</a><br /></td></tr>
<tr class="separator:a03028e6082b0e88e2d46c4c9ea0e7af7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5a114c04be3e48711271ab2ffd6be8fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a114c04be3e48711271ab2ffd6be8fc">WatchdogBase</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> chat, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> sessionControllerFactory, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a> dmbFactory, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a> sessionPersistor, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> serverControl, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_async_delayer.html">IAsyncDelayer</a> asyncDelayer, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt; logger, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> initialLaunchParameters, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>, bool <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a>)</td></tr>
<tr class="memdesc:a5a114c04be3e48711271ab2ffd6be8fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> class.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a114c04be3e48711271ab2ffd6be8fc">More...</a><br /></td></tr>
<tr class="separator:a5a114c04be3e48711271ab2ffd6be8fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea6ea203494afd514530ef26724194fa"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa">InitController</a> (Task chatTask, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a> reattachInfo, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aea6ea203494afd514530ef26724194fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts all ISessionControllers.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa">More...</a><br /></td></tr>
<tr class="separator:aea6ea203494afd514530ef26724194fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5d1f2571cdce3431ab477a9c9c3e6f4"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a> (bool startMonitor, bool announce, bool announceFailure, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a> reattachInfo, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af5d1f2571cdce3431ab477a9c9c3e6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launches the watchdog.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">More...</a><br /></td></tr>
<tr class="separator:af5d1f2571cdce3431ab477a9c9c3e6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c51b6e88cc02dfa78070f5870b3b30"><td class="memItemLeft" align="right" valign="top">async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30">StopMonitor</a> ()</td></tr>
<tr class="memdesc:ab4c51b6e88cc02dfa78070f5870b3b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a>. Doesn't kill the servers.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30">More...</a><br /></td></tr>
<tr class="separator:ab4c51b6e88cc02dfa78070f5870b3b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96ad9302ae812f4ba3bbbaed2f7adbd0"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a96ad9302ae812f4ba3bbbaed2f7adbd0">CheckLaunchResult</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a> controller, string serverName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a96ad9302ae812f4ba3bbbaed2f7adbd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the LaunchResult of a given <em>controller</em>  for errors and throw a JobException if any are detected.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a96ad9302ae812f4ba3bbbaed2f7adbd0">More...</a><br /></td></tr>
<tr class="separator:a96ad9302ae812f4ba3bbbaed2f7adbd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1ca4d25ec02eb53ddbcb36088331a1"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1">ReattachFailure</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2a1ca4d25ec02eb53ddbcb36088331a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers.">InitController(Task, ReattachInformation, CancellationToken)</a> when a reattach operation fails to attempt a fresh start.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1">More...</a><br /></td></tr>
<tr class="separator:a2a1ca4d25ec02eb53ddbcb36088331a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8ea066a8ae2408f1c86f828d7974f8"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">DisposeAndNullControllersImpl</a> ()</td></tr>
<tr class="memdesc:a2f8ea066a8ae2408f1c86f828d7974f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call IDisposable.Dispose and null the fields for all ISessionControllers.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">More...</a><br /></td></tr>
<tr class="separator:a2f8ea066a8ae2408f1c86f828d7974f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875fe1589eb86e57a50a0e793b0d74f5"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a875fe1589eb86e57a50a0e793b0d74f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers.">DisposeAndNullControllersImpl</a> under a locked context.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">More...</a><br /></td></tr>
<tr class="separator:a875fe1589eb86e57a50a0e793b0d74f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a634f53946305b875c65c04dfd1719830"><td class="memItemLeft" align="right" valign="top">abstract <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a> ()</td></tr>
<tr class="memdesc:a634f53946305b875c65c04dfd1719830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the active ISessionController.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">More...</a><br /></td></tr>
<tr class="separator:a634f53946305b875c65c04dfd1719830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddddb5064444b1786a360d85c3c3873"><td class="memItemLeft" align="right" valign="top">abstract Task&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">HandleMonitorWakeup</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> activationReason, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a0ddddb5064444b1786a360d85c3c3873"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the actions to take when the monitor has to "wake up".  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">More...</a><br /></td></tr>
<tr class="separator:a0ddddb5064444b1786a360d85c3c3873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1582efdefef65cd7587e76a7bae09a4e"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1582efdefef65cd7587e76a7bae09a4e">BeforeApplyDmb</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> newCompileJob, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a1582efdefef65cd7587e76a7bae09a4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called before a given <em>newCompileJob</em>  goes live.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1582efdefef65cd7587e76a7bae09a4e">More...</a><br /></td></tr>
<tr class="separator:a1582efdefef65cd7587e76a7bae09a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3067474bf7404758391b6412e2f6454a"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a">HandleNonRelayedEvent</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string &gt; parameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a3067474bf7404758391b6412e2f6454a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em>  without re-throwing errors.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a">More...</a><br /></td></tr>
<tr class="separator:a3067474bf7404758391b6412e2f6454a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current WatchdogStatus.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">More...</a><br /></td></tr>
<tr class="separator:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f77bb87d63b1a1a50aac89ad909f29"><td class="memItemLeft" align="right" valign="top">abstract bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39f77bb87d63b1a1a50aac89ad909f29">AlphaIsActive</a><code> [get]</code></td></tr>
<tr class="memdesc:a39f77bb87d63b1a1a50aac89ad909f29"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the alpha server is the active server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39f77bb87d63b1a1a50aac89ad909f29">More...</a><br /></td></tr>
<tr class="separator:a39f77bb87d63b1a1a50aac89ad909f29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a><code> [get, protected set]</code></td></tr>
<tr class="memdesc:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters the active server is using.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">More...</a><br /></td></tr>
<tr class="separator:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6548572ef5ab9d7b6b3aae8647a0a053"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">LastLaunchParameters</a><code> [get, protected set]</code></td></tr>
<tr class="memdesc:a6548572ef5ab9d7b6b3aae8647a0a053"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters to be applied.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">More...</a><br /></td></tr>
<tr class="separator:a6548572ef5ab9d7b6b3aae8647a0a053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4b8311c8cbd7cb851d1ade3bc27e05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">ActiveCompileJob</a><code> [get]</code></td></tr>
<tr class="memdesc:a5a4b8311c8cbd7cb851d1ade3bc27e05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">More...</a><br /></td></tr>
<tr class="separator:a5a4b8311c8cbd7cb851d1ade3bc27e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc3f8e6c5569555d358578e612a1920"><td class="memItemLeft" align="right" valign="top">abstract ? <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5bc3f8e6c5569555d358578e612a1920">RebootState</a><code> [get]</code></td></tr>
<tr class="memdesc:a5bc3f8e6c5569555d358578e612a1920"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5bc3f8e6c5569555d358578e612a1920">More...</a><br /></td></tr>
<tr class="separator:a5bc3f8e6c5569555d358578e612a1920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee401fd5e0d23482b77498b6ec23a03"><td class="memItemLeft" align="right" valign="top">TaskCompletionSource&lt; object &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afee401fd5e0d23482b77498b6ec23a03">ActiveParametersUpdated</a><code> [get, set]</code></td></tr>
<tr class="memdesc:afee401fd5e0d23482b77498b6ec23a03"><td class="mdescLeft">&#160;</td><td class="mdescRight">TaskCompletionSource&lt;TResult&gt; that completes when <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters the active server is using.">ActiveLaunchParameters</a> are changed and we are running.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afee401fd5e0d23482b77498b6ec23a03">More...</a><br /></td></tr>
<tr class="separator:afee401fd5e0d23482b77498b6ec23a03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3bafe5d390332f896cdaf43a8db55d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d">SessionPersistor</a><code> [get]</code></td></tr>
<tr class="memdesc:a5a3bafe5d390332f896cdaf43a8db55d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionPersistor for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d">More...</a><br /></td></tr>
<tr class="separator:a5a3bafe5d390332f896cdaf43a8db55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="memItemLeft" align="right" valign="top">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a><code> [get]</code></td></tr>
<tr class="memdesc:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">More...</a><br /></td></tr>
<tr class="separator:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a><code> [get]</code></td></tr>
<tr class="memdesc:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IChatManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">More...</a><br /></td></tr>
<tr class="separator:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb">SessionControllerFactory</a><code> [get]</code></td></tr>
<tr class="memdesc:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionControllerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb">More...</a><br /></td></tr>
<tr class="separator:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401d41a1b1b805f553f53b35f46275ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef">DmbFactory</a><code> [get]</code></td></tr>
<tr class="memdesc:a401d41a1b1b805f553f53b35f46275ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IDmbFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef">More...</a><br /></td></tr>
<tr class="separator:a401d41a1b1b805f553f53b35f46275ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdc59de3b3556a08bd111264527f369"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369">AsyncDelayer</a><code> [get]</code></td></tr>
<tr class="memdesc:abbdc59de3b3556a08bd111264527f369"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369">More...</a><br /></td></tr>
<tr class="separator:abbdc59de3b3556a08bd111264527f369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td colspan="2" onclick="javascript:toggleInherit('properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a></td></tr>
<tr class="memitem:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">Status</a><code> [get]</code></td></tr>
<tr class="memdesc:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current WatchdogStatus.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">More...</a><br /></td></tr>
<tr class="separator:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">AlphaIsActive</a><code> [get]</code></td></tr>
<tr class="memdesc:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the alpha server is the active server.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">More...</a><br /></td></tr>
<tr class="separator:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23f9971c8bc84a87cfaf08744eaaee0d inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a23f9971c8bc84a87cfaf08744eaaee0d">ActiveCompileJob</a><code> [get]</code></td></tr>
<tr class="memdesc:a23f9971c8bc84a87cfaf08744eaaee0d inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a23f9971c8bc84a87cfaf08744eaaee0d">More...</a><br /></td></tr>
<tr class="separator:a23f9971c8bc84a87cfaf08744eaaee0d inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">ActiveLaunchParameters</a><code> [get]</code></td></tr>
<tr class="memdesc:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters the active server is using.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">More...</a><br /></td></tr>
<tr class="separator:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf8f73df0fe074af3363857bc43e63a5 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#adf8f73df0fe074af3363857bc43e63a5">LastLaunchParameters</a><code> [get]</code></td></tr>
<tr class="memdesc:adf8f73df0fe074af3363857bc43e63a5 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters to be applied.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#adf8f73df0fe074af3363857bc43e63a5">More...</a><br /></td></tr>
<tr class="separator:adf8f73df0fe074af3363857bc43e63a5 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">RebootState</a><code> [get]</code></td></tr>
<tr class="memdesc:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.  <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">More...</a><br /></td></tr>
<tr class="separator:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a1b043f3ab25e84bc675dd5455cbf3f52"><td class="memItemLeft" align="right" valign="top">async Task IEventConsumer.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1b043f3ab25e84bc675dd5455cbf3f52">HandleEvent</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string &gt; parameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a1b043f3ab25e84bc675dd5455cbf3f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1b043f3ab25e84bc675dd5455cbf3f52">More...</a><br /></td></tr>
<tr class="separator:a1b043f3ab25e84bc675dd5455cbf3f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24fd29d12e91f659010d483228be1225"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">MonitorRestart</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a24fd29d12e91f659010d483228be1225"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to restart the monitor from scratch.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">More...</a><br /></td></tr>
<tr class="separator:a24fd29d12e91f659010d483228be1225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfec26f530228b80d384b86ee979ef2f"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">MonitorLifetimes</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:adfec26f530228b80d384b86ee979ef2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">More...</a><br /></td></tr>
<tr class="separator:adfec26f530228b80d384b86ee979ef2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6845304123ed975aec4de3dc79bf8551"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">TerminateNoLock</a> (bool graceful, bool announce, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a6845304123ed975aec4de3dc79bf8551"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog.">Terminate(bool, CancellationToken)</a>. Does not lock <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4" title="The SemaphoreSlim for the WatchdogBase.">synchronizationSemaphore</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">More...</a><br /></td></tr>
<tr class="separator:a6845304123ed975aec4de3dc79bf8551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97b5cac3c59bff5f5dab4bd5e4620042"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042">HandleHeartbeat</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a97b5cac3c59bff5f5dab4bd5e4620042"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a watchdog heartbeat.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042">More...</a><br /></td></tr>
<tr class="separator:a97b5cac3c59bff5f5dab4bd5e4620042"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a52038e1a769f1114c492c76640a6afc8"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a></td></tr>
<tr class="memdesc:a52038e1a769f1114c492c76640a6afc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">More...</a><br /></td></tr>
<tr class="separator:a52038e1a769f1114c492c76640a6afc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a></td></tr>
<tr class="memdesc:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SemaphoreSlim for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">More...</a><br /></td></tr>
<tr class="separator:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a></td></tr>
<tr class="memdesc:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="mdescLeft">&#160;</td><td class="mdescRight">SemaphoreSlim used for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context.">DisposeAndNullControllers</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">More...</a><br /></td></tr>
<tr class="separator:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5768c37124d54e80c66dc63d28d0dea4"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a></td></tr>
<tr class="memdesc:a5768c37124d54e80c66dc63d28d0dea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IEventConsumer that is not the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">More...</a><br /></td></tr>
<tr class="separator:a5768c37124d54e80c66dc63d28d0dea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a></td></tr>
<tr class="memdesc:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">More...</a><br /></td></tr>
<tr class="separator:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html">IRestartRegistration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a></td></tr>
<tr class="memdesc:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRestartRegistration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">More...</a><br /></td></tr>
<tr class="separator:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8becb1115fe1c09c84534c798466e03f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a></td></tr>
<tr class="memdesc:a8becb1115fe1c09c84534c798466e03f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager pointing to the Diagnostics directory.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">More...</a><br /></td></tr>
<tr class="separator:a8becb1115fe1c09c84534c798466e03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72637a3ebe8925b7c3753416370ad83c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a></td></tr>
<tr class="memdesc:a72637a3ebe8925b7c3753416370ad83c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRemoteDeploymentManagerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">More...</a><br /></td></tr>
<tr class="separator:a72637a3ebe8925b7c3753416370ad83c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410f168d84f80c138450fb42f222ba01"><td class="memItemLeft" align="right" valign="top">readonly bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a></td></tr>
<tr class="memdesc:a410f168d84f80c138450fb42f222ba01"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> should <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog.">LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken)</a> in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync(CancellationToken)</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">More...</a><br /></td></tr>
<tr class="separator:a410f168d84f80c138450fb42f222ba01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a5f64148a117c561df7b0e7e1703e6"><td class="memItemLeft" align="right" valign="top">CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a></td></tr>
<tr class="memdesc:a47a5f64148a117c561df7b0e7e1703e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource for the monitor loop.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">More...</a><br /></td></tr>
<tr class="separator:a47a5f64148a117c561df7b0e7e1703e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb7590db69ab59a040c1ac91c671d6d"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a></td></tr>
<tr class="memdesc:abfb7590db69ab59a040c1ac91c671d6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Task running the monitor loop.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">More...</a><br /></td></tr>
<tr class="separator:abfb7590db69ab59a040c1ac91c671d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c8949750c7c079faf8d438fde20c6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a></td></tr>
<tr class="memdesc:af5c8949750c7c079faf8d438fde20c6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backing field for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb" title="The current WatchdogStatus.">Status</a>.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">More...</a><br /></td></tr>
<tr class="separator:af5c8949750c7c079faf8d438fde20c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf0a71134899c397cc88eb39a189ff0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abaf0a71134899c397cc88eb39a189ff0">heartbeatsMissed</a></td></tr>
<tr class="memdesc:abaf0a71134899c397cc88eb39a189ff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of hearbeats missed.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abaf0a71134899c397cc88eb39a189ff0">More...</a><br /></td></tr>
<tr class="separator:abaf0a71134899c397cc88eb39a189ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256c7fd5a04870388411185b46ff6fb8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a></td></tr>
<tr class="memdesc:a256c7fd5a04870388411185b46ff6fb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the servers should be released instead of shutdown.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">More...</a><br /></td></tr>
<tr class="separator:a256c7fd5a04870388411185b46ff6fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c39f385b06058f4699503b492d2b743"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a></td></tr>
<tr class="memdesc:a5c39f385b06058f4699503b492d2b743"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> has been <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a>'d.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">More...</a><br /></td></tr>
<tr class="separator:a5c39f385b06058f4699503b492d2b743"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Base class for <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>s. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00030">30</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5a114c04be3e48711271ab2ffd6be8fc" name="a5a114c04be3e48711271ab2ffd6be8fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a114c04be3e48711271ab2ffd6be8fc">&#9670;&nbsp;</a></span>WatchdogBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td>
          <td class="paramname"><em>chat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td>
          <td class="paramname"><em>sessionControllerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a>&#160;</td>
          <td class="paramname"><em>dmbFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a>&#160;</td>
          <td class="paramname"><em>sessionPersistor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td>
          <td class="paramname"><em>jobManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td>
          <td class="paramname"><em>serverControl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>diagnosticsIOManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td>
          <td class="paramname"><em>eventConsumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManagerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>initialLaunchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>autoStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chat</td><td>The value of <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat.html">Chat</a>.</td></tr>
    <tr><td class="paramname">sessionControllerFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb" title="The ISessionControllerFactory for the WatchdogBase.">SessionControllerFactory</a>.</td></tr>
    <tr><td class="paramname">dmbFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef" title="The IDmbFactory for the WatchdogBase.">DmbFactory</a>.</td></tr>
    <tr><td class="paramname">sessionPersistor</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d" title="The ISessionPersistor for the WatchdogBase.">SessionPersistor</a>.</td></tr>
    <tr><td class="paramname">jobManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319" title="The IJobManager for the WatchdogBase.">jobManager</a>.</td></tr>
    <tr><td class="paramname">serverControl</td><td>The IServerControl to populate <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea" title="The IRestartRegistration for the WatchdogBase.">restartRegistration</a> with.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369" title="The IAsyncDelayer for the WatchdogBase.">AsyncDelayer</a>.</td></tr>
    <tr><td class="paramname">diagnosticsIOManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f" title="The IIOManager pointing to the Diagnostics directory.">diagnosticsIOManager</a>.</td></tr>
    <tr><td class="paramname">eventConsumer</td><td>The value of EventConsumer.</td></tr>
    <tr><td class="paramname">remoteDeploymentManagerFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c" title="The IRemoteDeploymentManagerFactory for the WatchdogBase.">remoteDeploymentManagerFactory</a>.</td></tr>
    <tr><td class="paramname">logger</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6" title="The ILogger for the WatchdogBase.">Logger</a>.</td></tr>
    <tr><td class="paramname">initialLaunchParameters</td><td>The initial value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters the active server is using.">ActiveLaunchParameters</a>. May be modified.</td></tr>
    <tr><td class="paramname">metadata</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8" title="The Api.Models.Instance for the WatchdogBase.">metadata</a>.</td></tr>
    <tr><td class="paramname">autoStart</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01" title="If the WatchdogBase should LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken) in ...">autoStart</a>.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00185">185</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  200</span>        {</div>
<div class="line"><span class="lineno">  201</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a> = chat ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(chat));</div>
<div class="line"><span class="lineno">  202</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory.html">SessionControllerFactory</a> = sessionControllerFactory ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(sessionControllerFactory));</div>
<div class="line"><span class="lineno">  203</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a> = dmbFactory ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(dmbFactory));</div>
<div class="line"><span class="lineno">  204</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a> = sessionPersistor ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(sessionPersistor));</div>
<div class="line"><span class="lineno">  205</span>            this.jobManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>));</div>
<div class="line"><span class="lineno">  206</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html">AsyncDelayer</a> = asyncDelayer ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(asyncDelayer));</div>
<div class="line"><span class="lineno">  207</span>            this.diagnosticsIOManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>));</div>
<div class="line"><span class="lineno">  208</span>            this.eventConsumer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>));</div>
<div class="line"><span class="lineno">  209</span>            this.remoteDeploymentManagerFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>));</div>
<div class="line"><span class="lineno">  210</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a> = logger ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(logger));</div>
<div class="line"><span class="lineno">  211</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = initialLaunchParameters ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(initialLaunchParameters));</div>
<div class="line"><span class="lineno">  212</span>            this.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>));</div>
<div class="line"><span class="lineno">  213</span>            this.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a>;</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>            <span class="keywordflow">if</span> (serverControl == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  216</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(serverControl));</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>            chat.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">RegisterCommandHandler</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = initialLaunchParameters;</div>
<div class="line"><span class="lineno">  221</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  222</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afee401fd5e0d23482b77498b6ec23a03">ActiveParametersUpdated</a> = <span class="keyword">new</span> TaskCompletionSource&lt;object&gt;();</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a> = serverControl.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">RegisterForRestart</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  225</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  226</span>            {</div>
<div class="line"><span class="lineno">  227</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  228</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  229</span>            }</div>
<div class="line"><span class="lineno">  230</span>            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  231</span>            {</div>
<div class="line"><span class="lineno">  232</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a>.Dispose();</div>
<div class="line"><span class="lineno">  233</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>?.Dispose();</div>
<div class="line"><span class="lineno">  234</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  235</span>            }</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Created watchdog&quot;</span>);</div>
<div class="line"><span class="lineno">  238</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">Tgstation.Server.Host.Components.Deployment.DmbFactory</a></div><div class="ttdoc">Standard IDmbFactory.</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00021">DmbFactory.cs:22</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory.html">Tgstation.Server.Host.Components.Session.SessionControllerFactory</a></div><div class="ttdef"><b>Definition:</b> <a href="_session_controller_factory_8cs_source.html#l00031">SessionControllerFactory.cs:32</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">Tgstation.Server.Host.Components.Session.SessionPersistor</a></div><div class="ttdef"><b>Definition:</b> <a href="_session_persistor_8cs_source.html#l00018">SessionPersistor.cs:19</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a1688863ddcd7d0bbfa3ec13b7b015319"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a></div><div class="ttdeci">readonly IJobManager jobManager</div><div class="ttdoc">The IJobManager for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00116">WatchdogBase.cs:116</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a2143ec7079d0ffd42c76f61cf7b71cf6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a></div><div class="ttdeci">ILogger&lt; WatchdogBase &gt; Logger</div><div class="ttdoc">The ILogger for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00071">WatchdogBase.cs:71</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a256c7fd5a04870388411185b46ff6fb8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a></div><div class="ttdeci">bool releaseServers</div><div class="ttdoc">If the servers should be released instead of shutdown.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00161">WatchdogBase.cs:161</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a410f168d84f80c138450fb42f222ba01"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a></div><div class="ttdeci">readonly bool autoStart</div><div class="ttdoc">If the WatchdogBase should LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken) in ...</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00136">WatchdogBase.cs:136</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a52038e1a769f1114c492c76640a6afc8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a></div><div class="ttdeci">readonly Api.Models.Instance metadata</div><div class="ttdoc">The Api.Models.Instance for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00096">WatchdogBase.cs:96</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5768c37124d54e80c66dc63d28d0dea4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a></div><div class="ttdeci">readonly IEventConsumer eventConsumer</div><div class="ttdoc">The IEventConsumer that is not the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00111">WatchdogBase.cs:111</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5f9cfb67111bbc5ec1d954e4ed4bf913"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim controllerDisposeSemaphore</div><div class="ttdoc">SemaphoreSlim used for DisposeAndNullControllers.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00106">WatchdogBase.cs:106</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a72637a3ebe8925b7c3753416370ad83c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a></div><div class="ttdeci">readonly IRemoteDeploymentManagerFactory remoteDeploymentManagerFactory</div><div class="ttdoc">The IRemoteDeploymentManagerFactory for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00131">WatchdogBase.cs:131</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a7e6adcb942a9ff1bb7d11d738b98b6e4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim synchronizationSemaphore</div><div class="ttdoc">The SemaphoreSlim for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00101">WatchdogBase.cs:101</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a8becb1115fe1c09c84534c798466e03f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</a></div><div class="ttdeci">readonly IIOManager diagnosticsIOManager</div><div class="ttdoc">The IIOManager pointing to the Diagnostics directory.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00126">WatchdogBase.cs:126</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a9affc2eeae2903d1bdb0fa81a6550fc4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a></div><div class="ttdeci">DreamDaemonLaunchParameters ActiveLaunchParameters</div><div class="ttdoc">The DreamDaemonLaunchParameters the active server is using.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00047">WatchdogBase.cs:47</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aec24ff5e3b22b40e62f4a2443eb8cec9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a></div><div class="ttdeci">IChatManager Chat</div><div class="ttdoc">The IChatManager for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00076">WatchdogBase.cs:76</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aefe25fd33c4a6dfb4ea27b583a2286ea"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a></div><div class="ttdeci">readonly IRestartRegistration restartRegistration</div><div class="ttdoc">The IRestartRegistration for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00121">WatchdogBase.cs:121</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_afee401fd5e0d23482b77498b6ec23a03"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afee401fd5e0d23482b77498b6ec23a03">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</a></div><div class="ttdeci">TaskCompletionSource&lt; object &gt; ActiveParametersUpdated</div><div class="ttdoc">TaskCompletionSource&lt;TResult&gt; that completes when ActiveLaunchParameters are changed and we are runni...</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00061">WatchdogBase.cs:61</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html">Tgstation.Server.Host.Core.AsyncDelayer</a></div><div class="ttdef"><b>Definition:</b> <a href="_async_delayer_8cs_source.html#l00008">AsyncDelayer.cs:9</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_a1e1ce49aa3e843a1e037060a544e125e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">Tgstation.Server.Host.Components.Chat.IChatManager.RegisterCommandHandler</a></div><div class="ttdeci">void RegisterCommandHandler(ICustomCommandHandler customCommandHandler)</div><div class="ttdoc">Registers a customCommandHandler  to use.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control_html_a35728d66030addfd5551351b8c6db942"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">Tgstation.Server.Host.Core.IServerControl.RegisterForRestart</a></div><div class="ttdeci">IRestartRegistration RegisterForRestart(IRestartHandler handler)</div><div class="ttdoc">Register a given handler  to run before stopping the server for a restart.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00047">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00061">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00136">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00106">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00126">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00111">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00116">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00096">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">Tgstation.Server.Host.Components.Chat.IChatManager.RegisterCommandHandler()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">Tgstation.Server.Host.Core.IServerControl.RegisterForRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00161">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00131">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00121">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a5a114c04be3e48711271ab2ffd6be8fc_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a5a114c04be3e48711271ab2ffd6be8fc_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a5a114c04be3e48711271ab2ffd6be8fc_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a5a114c04be3e48711271ab2ffd6be8fc_cgraph">
<area shape="rect" title="Initializes a new instance of the WatchdogBase class." alt="" coords="5,39,268,80"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e" title="Registers a customCommandHandler &#160;to use." alt="" coords="316,5,604,47"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942" title="Register a given handler &#160;to run before stopping the server for a restart." alt="" coords="351,71,569,112"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1582efdefef65cd7587e76a7bae09a4e" name="a1582efdefef65cd7587e76a7bae09a4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1582efdefef65cd7587e76a7bae09a4e">&#9670;&nbsp;</a></span>BeforeApplyDmb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td>
          <td class="paramname"><em>newCompileJob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>To be called before a given <em>newCompileJob</em>  goes live. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newCompileJob</td><td>The new <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> being applied.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00665">665</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  666</span>        {</div>
<div class="line"><span class="lineno">  667</span>            <span class="keywordflow">if</span> (newCompileJob.Id == <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">ActiveCompileJob</a>?.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a>)</div>
<div class="line"><span class="lineno">  668</span>            {</div>
<div class="line"><span class="lineno">  669</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Same compile job, not sending deployment event&quot;</span>);</div>
<div class="line"><span class="lineno">  670</span>                <span class="keywordflow">return</span> Task.CompletedTask;</div>
<div class="line"><span class="lineno">  671</span>            }</div>
<div class="line"><span class="lineno">  672</span> </div>
<div class="line"><span class="lineno">  673</span>            var remoteDeploymentManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">CreateRemoteDeploymentManager</a>(</div>
<div class="line"><span class="lineno">  674</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>,</div>
<div class="line"><span class="lineno">  675</span>                newCompileJob);</div>
<div class="line"><span class="lineno">  676</span>            <span class="keywordflow">return</span> remoteDeploymentManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a5eb0d5e39709230e697671ed11f1cc04">ApplyDeployment</a>(newCompileJob, <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">ActiveCompileJob</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  677</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id_html_ae31e478e1d338b37a14565df6fd58570"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Tgstation.Server.Api.Models.EntityId.Id</a></div><div class="ttdeci">virtual ? long Id</div><div class="ttdoc">The ID of the entity.</div><div class="ttdef"><b>Definition:</b> <a href="_entity_id_8cs_source.html#l00013">EntityId.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5a4b8311c8cbd7cb851d1ade3bc27e05"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</a></div><div class="ttdeci">Models.CompileJob ActiveCompileJob</div><div class="ttdoc">Retrieves the Models.CompileJob currently running on the server.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00053">WatchdogBase.cs:53</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory_html_a4115cea1f220c4fdaede74566aa848d3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager</a></div><div class="ttdeci">IRemoteDeploymentManager CreateRemoteDeploymentManager(Api.Models.Instance metadata, RemoteGitProvider remoteGitProvider)</div><div class="ttdoc">Creates a IRemoteDeploymentManager for a given remoteGitProvider .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html_a5eb0d5e39709230e697671ed11f1cc04"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a5eb0d5e39709230e697671ed11f1cc04">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.ApplyDeployment</a></div><div class="ttdeci">Task ApplyDeployment(CompileJob compileJob, CompileJob oldCompileJob, CancellationToken cancellationToken)</div><div class="ttdoc">Stage a given compileJob 's deployment.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00053">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a5eb0d5e39709230e697671ed11f1cc04">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.ApplyDeployment()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager()</a>, <a class="el" href="_entity_id_8cs_source.html#l00013">Tgstation.Server.Api.Models.EntityId.Id</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00096">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00131">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a>.</p>

<p class="reference">Referenced by <a class="el" href="_windows_watchdog_8cs_source.html#l00129">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNormalReboot()</a>, and <a class="el" href="_basic_watchdog_8cs_source.html#l00202">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1582efdefef65cd7587e76a7bae09a4e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1582efdefef65cd7587e76a7bae09a4e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1582efdefef65cd7587e76a7bae09a4e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1582efdefef65cd7587e76a7bae09a4e_cgraph">
<area shape="rect" title="To be called before a given newCompileJob &#160;goes live." alt="" coords="5,53,276,94"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a5eb0d5e39709230e697671ed11f1cc04" title="Stage a given compileJob &#39;s deployment." alt="" coords="354,5,613,61"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3" title="Creates a IRemoteDeploymentManager for a given remoteGitProvider ." alt="" coords="324,85,643,141"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1582efdefef65cd7587e76a7bae09a4e_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1582efdefef65cd7587e76a7bae09a4e_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1582efdefef65cd7587e76a7bae09a4e_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1582efdefef65cd7587e76a7bae09a4e_icgraph">
<area shape="rect" title="To be called before a given newCompileJob &#160;goes live." alt="" coords="375,39,645,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#afcdeb4376d24326a76bc920fe6974b35" title="Handler for MonitorActivationReason.ActiveServerRebooted when the RebootState is RebootState...." alt="" coords="5,5,327,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a0abae67fe2b0edafd6b6ef7b9173862c" title="Starts all ISessionControllers." alt="" coords="41,71,291,112"/>
</map>
</div>

</div>
</div>
<a id="a390fcde5ed6ed30d6e5b5b2ebc8273dc" name="a390fcde5ed6ed30d6e5b5b2ebc8273dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a390fcde5ed6ed30d6e5b5b2ebc8273dc">&#9670;&nbsp;</a></span>ChangeSettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>launchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters the active server is using.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afab0aa088dc77e54e978c730645d8d00">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00255">255</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>        {</div>
<div class="line"><span class="lineno">  257</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  258</span>            {</div>
<div class="line"><span class="lineno">  259</span>                <span class="keywordtype">bool</span> match = launchParameters.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13">CanApplyWithoutReboot</a>(<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>);</div>
<div class="line"><span class="lineno">  260</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = launchParameters;</div>
<div class="line"><span class="lineno">  261</span>                <span class="keywordflow">if</span> (match || <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  262</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afee401fd5e0d23482b77498b6ec23a03">ActiveParametersUpdated</a>.TrySetResult(<span class="keyword">null</span>); <span class="comment">// queue an update</span></div>
<div class="line"><span class="lineno">  265</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afee401fd5e0d23482b77498b6ec23a03">ActiveParametersUpdated</a> = <span class="keyword">new</span> TaskCompletionSource&lt;object&gt;();</div>
<div class="line"><span class="lineno">  266</span>            }</div>
<div class="line"><span class="lineno">  267</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_ad1c56d38c1a48c110765c99a72619e13"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.CanApplyWithoutReboot</a></div><div class="ttdeci">bool CanApplyWithoutReboot(DreamDaemonLaunchParameters otherParameters)</div><div class="ttdoc">Check if we match a given set of otherParameters . StartupTimeout is excluded.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5fa8be05b0c448ea097a70e5d8708ffb"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a></div><div class="ttdeci">WatchdogStatus Status</div><div class="ttdoc">The current WatchdogStatus.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00033">WatchdogBase.cs:34</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">Tgstation.Server.Host.Core.SemaphoreSlimContext</a></div><div class="ttdoc">Async lock context helper.</div><div class="ttdef"><b>Definition:</b> <a href="_semaphore_slim_context_8cs_source.html#l00010">SemaphoreSlimContext.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context_html_a777a45bdcc1be5005b5a3ef72618a04e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock</a></div><div class="ttdeci">static async Task&lt; SemaphoreSlimContext &gt; Lock(SemaphoreSlim semaphore, CancellationToken cancellationToken)</div><div class="ttdoc">Asyncronously locks a semaphore .</div><div class="ttdef"><b>Definition:</b> <a href="_semaphore_slim_context_8cs_source.html#l00018">SemaphoreSlimContext.cs:18</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_abcc98739b8feb9dd6744647f287e0683"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">Tgstation.Server.Api.Models.WatchdogStatus</a></div><div class="ttdeci">WatchdogStatus</div><div class="ttdoc">The current status of the watchdog.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_status_8cs_source.html#l00006">WatchdogStatus.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00047">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00061">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</a>, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.CanApplyWithoutReboot()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a390fcde5ed6ed30d6e5b5b2ebc8273dc_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a390fcde5ed6ed30d6e5b5b2ebc8273dc_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a390fcde5ed6ed30d6e5b5b2ebc8273dc_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a390fcde5ed6ed30d6e5b5b2ebc8273dc_cgraph">
<area shape="rect" title="Changes the ActiveLaunchParameters. If currently running, may trigger a graceful restart." alt="" coords="5,49,272,90"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13" title="Check if we match a given set of otherParameters . StartupTimeout is excluded." alt="" coords="320,5,587,61"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="358,85,549,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="635,77,888,133"/>
</map>
</div>

</div>
</div>
<a id="a96ad9302ae812f4ba3bbbaed2f7adbd0" name="a96ad9302ae812f4ba3bbbaed2f7adbd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96ad9302ae812f4ba3bbbaed2f7adbd0">&#9670;&nbsp;</a></span>CheckLaunchResult()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CheckLaunchResult </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a>&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>serverName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the LaunchResult of a given <em>controller</em>  for errors and throw a JobException if any are detected. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>The ISessionController to checkou.</td></tr>
    <tr><td class="paramname">serverName</td><td>The name of the server being checked.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00589">589</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  590</span>        {</div>
<div class="line"><span class="lineno">  591</span>            var launchResult = await controller.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html#adca786a78dbcd230b94fcde69e9fc885">LaunchResult</a>.WithToken(cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>            <span class="comment">// Dead sessions won&#39;t trigger this</span></div>
<div class="line"><span class="lineno">  594</span>            <span class="keywordflow">if</span> (launchResult.ExitCode.HasValue) <span class="comment">// you killed us ray...</span></div>
<div class="line"><span class="lineno">  595</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(</div>
<div class="line"><span class="lineno">  596</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogStartupFailed,</div>
<div class="line"><span class="lineno">  597</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>($<span class="stringliteral">&quot;{serverName} failed to start: {launchResult}&quot;</span>));</div>
<div class="line"><span class="lineno">  598</span>            <span class="keywordflow">if</span> (!launchResult.StartupTime.HasValue)</div>
<div class="line"><span class="lineno">  599</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(</div>
<div class="line"><span class="lineno">  600</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogStartupTimeout,</div>
<div class="line"><span class="lineno">  601</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>($<span class="stringliteral">&quot;{serverName} timed out on startup: {ActiveLaunchParameters.StartupTimeout.Value}s&quot;</span>));</div>
<div class="line"><span class="lineno">  602</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">Tgstation.Server.Host.Jobs.JobException</a></div><div class="ttdoc">Operation exceptions thrown from the context of a Models.Job.</div><div class="ttdef"><b>Definition:</b> <a href="_job_exception_8cs_source.html#l00010">JobException.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_html_adca786a78dbcd230b94fcde69e9fc885"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html#adca786a78dbcd230b94fcde69e9fc885">Tgstation.Server.Host.Components.Session.ISessionController.LaunchResult</a></div><div class="ttdeci">Task&lt; LaunchResult &gt; LaunchResult</div><div class="ttdoc">A Task that completes when DreamDaemon starts pumping the windows message queue after loading a ....</div><div class="ttdef"><b>Definition:</b> <a href="_i_session_controller_8cs_source.html#l00020">ISessionController.cs:20</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a1a6adb59dd51244efabf4e548e7075c8"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">Tgstation.Server.Api.Models.ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Types of Response.ErrorMessageResponses that the API may return.</div><div class="ttdef"><b>Definition:</b> <a href="_error_code_8cs_source.html#l00010">ErrorCode.cs:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_session_controller_8cs_source.html#l00020">Tgstation.Server.Host.Components.Session.ISessionController.LaunchResult</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00202">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a96ad9302ae812f4ba3bbbaed2f7adbd0_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a96ad9302ae812f4ba3bbbaed2f7adbd0_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a96ad9302ae812f4ba3bbbaed2f7adbd0_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a96ad9302ae812f4ba3bbbaed2f7adbd0_icgraph">
<area shape="rect" title="Check the LaunchResult of a given controller &#160;for errors and throw a JobException if any are detected..." alt="" coords="304,5,595,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a0abae67fe2b0edafd6b6ef7b9173862c" title="Starts all ISessionControllers." alt="" coords="5,5,256,47"/>
</map>
</div>

</div>
</div>
<a id="ad8489bee0d96bcaf87eba19adee17149" name="ad8489bee0d96bcaf87eba19adee17149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8489bee0d96bcaf87eba19adee17149">&#9670;&nbsp;</a></span>CreateDump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to create a process dump for DreamDaemon.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a67f97ee77ae892e162173be45d7522f7">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00412">412</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  413</span>        {</div>
<div class="line"><span class="lineno">  414</span>            <span class="keyword">const</span> <span class="keywordtype">string</span> DumpDirectory = <span class="stringliteral">&quot;ProcessDumps&quot;</span>;</div>
<div class="line"><span class="lineno">  415</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">CreateDirectory</a>(DumpDirectory, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>            var dumpFileName = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(</div>
<div class="line"><span class="lineno">  418</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(</div>
<div class="line"><span class="lineno">  419</span>                    DumpDirectory,</div>
<div class="line"><span class="lineno">  420</span>                    $<span class="stringliteral">&quot;DreamDaemon-{DateTimeOffset.UtcNow.ToFileStamp()}.dmp&quot;</span>));</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>            var session = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  423</span>            <span class="keywordflow">if</span> (session?.Lifetime.IsCompleted != <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  424</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DreamDaemonOffline);</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Dumping session to {0}...&quot;</span>, dumpFileName);</div>
<div class="line"><span class="lineno">  427</span>            await session.CreateDump(dumpFileName, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  428</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a634f53946305b875c65c04dfd1719830"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController</a></div><div class="ttdeci">abstract ISessionController GetActiveController()</div><div class="ttdoc">Get the active ISessionController.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a18a442b5dff16f5e7a730ec354e81d78"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath</a></div><div class="ttdeci">string ResolvePath()</div><div class="ttdoc">Retrieve the full path of the current working directory.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a69aa1b9dbeb6af3744e568095c4376e7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">Tgstation.Server.Host.IO.IIOManager.CreateDirectory</a></div><div class="ttdeci">Task CreateDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Create a directory at path .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">Tgstation.Server.Host.IO.IIOManager.CreateDirectory()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00126">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_cgraph">
<area shape="rect" title="Attempt to create a process dump for DreamDaemon." alt="" coords="5,104,252,145"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="359,5,527,47"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="352,71,535,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="300,136,587,177"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="359,201,527,243"/>
</map>
</div>

</div>
</div>
<a id="a875fe1589eb86e57a50a0e793b0d74f5" name="a875fe1589eb86e57a50a0e793b0d74f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a875fe1589eb86e57a50a0e793b0d74f5">&#9670;&nbsp;</a></span>DisposeAndNullControllers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers.">DisposeAndNullControllersImpl</a> under a locked context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00632">632</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  633</span>        {</div>
<div class="line"><span class="lineno">  634</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;DisposeAndNullControllers&quot;</span>);</div>
<div class="line"><span class="lineno">  635</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  636</span>            {</div>
<div class="line"><span class="lineno">  637</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">DisposeAndNullControllersImpl</a>().ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  638</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>)</div>
<div class="line"><span class="lineno">  639</span>                    await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7">Clear</a>(cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  640</span>            }</div>
<div class="line"><span class="lineno">  641</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html_aebef451cedbed6fe5a4367fe035470a7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7">Tgstation.Server.Host.Components.Session.SessionPersistor.Clear</a></div><div class="ttdeci">Task Clear(CancellationToken cancellationToken)</div><div class="ttdoc">Clear any stored ReattachInformation.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a2f8ea066a8ae2408f1c86f828d7974f8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl</a></div><div class="ttdeci">abstract Task DisposeAndNullControllersImpl()</div><div class="ttdoc">Call IDisposable.Dispose and null the fields for all ISessionControllers.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7">Tgstation.Server.Host.Components.Session.SessionPersistor.Clear()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00106">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00161">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00241">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01011">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHeartbeat()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00202">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00703">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00609">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_cgraph">
<area shape="rect" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="5,70,272,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="340,5,567,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="320,70,587,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="358,149,549,191"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="647,5,876,47"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="936,5,1145,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="635,142,888,198"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_icgraph">
<area shape="rect" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1629,190,1896,246"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3" title=" " alt="" coords="1317,48,1574,89"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="1309,113,1581,155"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="972,139,1243,180"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,201,595,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a0abae67fe2b0edafd6b6ef7b9173862c" title="Starts all ISessionControllers." alt="" coords="982,307,1233,348"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="1313,332,1578,373"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#a0e1817e43a1511f502d69400cbd1ab85" title="Initializes a new instance of the WindowsWatchdog class." alt="" coords="953,48,1261,89"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,113,905,155"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,71,579,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,136,579,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,5,585,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,136,288,177"/>
</map>
</div>

</div>
</div>
<a id="a2f8ea066a8ae2408f1c86f828d7974f8" name="a2f8ea066a8ae2408f1c86f828d7974f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f8ea066a8ae2408f1c86f828d7974f8">&#9670;&nbsp;</a></span>DisposeAndNullControllersImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call IDisposable.Dispose and null the fields for all ISessionControllers. </p>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a269e152d2acb113d8fd5db064c098162">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>, and <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#a4fbabec855f7dc736b0bd76e6c311be4">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2f8ea066a8ae2408f1c86f828d7974f8_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2f8ea066a8ae2408f1c86f828d7974f8_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2f8ea066a8ae2408f1c86f828d7974f8_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2f8ea066a8ae2408f1c86f828d7974f8_icgraph">
<area shape="rect" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1944,190,2211,246"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1629,190,1896,246"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3" title=" " alt="" coords="1317,48,1574,89"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="1309,113,1581,155"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="972,139,1243,180"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,201,595,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a0abae67fe2b0edafd6b6ef7b9173862c" title="Starts all ISessionControllers." alt="" coords="982,307,1233,348"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="1313,332,1578,373"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#a0e1817e43a1511f502d69400cbd1ab85" title="Initializes a new instance of the WindowsWatchdog class." alt="" coords="953,48,1261,89"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,113,905,155"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,71,579,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,136,579,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,5,585,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,136,288,177"/>
</map>
</div>

</div>
</div>
<a id="a6f69db8c3ceae298404f5d8d5a7312b3" name="a6f69db8c3ceae298404f5d8d5a7312b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f69db8c3ceae298404f5d8d5a7312b3">&#9670;&nbsp;</a></span>DisposeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00241">241</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  242</span>        {</div>
<div class="line"><span class="lineno">  243</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Disposing...&quot;</span>);</div>
<div class="line"><span class="lineno">  244</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  245</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a>.Dispose();</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>            <span class="comment">// DCT: None available, Operation must always run</span></div>
<div class="line"><span class="lineno">  248</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(<span class="keywordflow">default</span>).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  249</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  250</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a>?.Dispose();</div>
<div class="line"><span class="lineno">  251</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a47a5f64148a117c561df7b0e7e1703e6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a></div><div class="ttdeci">CancellationTokenSource monitorCts</div><div class="ttdoc">The CancellationTokenSource for the monitor loop.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00141">WatchdogBase.cs:141</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5c39f385b06058f4699503b492d2b743"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a></div><div class="ttdeci">bool disposed</div><div class="ttdoc">If the WatchdogBase has been DisposeAsync'd.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00166">WatchdogBase.cs:166</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a875fe1589eb86e57a50a0e793b0d74f5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers</a></div><div class="ttdeci">async Task DisposeAndNullControllers(CancellationToken cancellationToken)</div><div class="ttdoc">Wrapper for DisposeAndNullControllersImpl under a locked context.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00632">WatchdogBase.cs:632</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00106">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00166">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00141">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00121">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="_windows_watchdog_8cs_source.html#l00068">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.WindowsWatchdog()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph">
<area shape="rect" title=" " alt="" coords="5,77,263,119"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="311,70,577,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="645,5,872,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="625,70,892,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="663,149,854,191"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="952,5,1181,47"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1241,5,1451,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="940,142,1193,198"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph">
<area shape="rect" title=" " alt="" coords="361,5,619,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#a0e1817e43a1511f502d69400cbd1ab85" title="Initializes a new instance of the WindowsWatchdog class." alt="" coords="5,5,313,47"/>
</map>
</div>

</div>
</div>
<a id="a634f53946305b875c65c04dfd1719830" name="a634f53946305b875c65c04dfd1719830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a634f53946305b875c65c04dfd1719830">&#9670;&nbsp;</a></span>GetActiveController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the active ISessionController. </p>
<dl class="section return"><dt>Returns</dt><dd>The active ISessionController.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a81f31795e687423e39ed6a9e6dd82454">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00412">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00431">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01011">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHeartbeat()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00305">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00318">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a634f53946305b875c65c04dfd1719830_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a634f53946305b875c65c04dfd1719830_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a634f53946305b875c65c04dfd1719830_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a634f53946305b875c65c04dfd1719830_icgraph">
<area shape="rect" title="Get the active ISessionController." alt="" coords="1621,231,1908,272"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon." alt="" coords="1299,5,1546,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afd81003b2e6d64f3f8240a61d44f112e" title="Handle a chat command." alt="" coords="1272,71,1573,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1b043f3ab25e84bc675dd5455cbf3f52" title="Handle a given eventType ." alt="" coords="1299,136,1547,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="1287,201,1559,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,211,1224,252"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,351,579,392"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aaf696fd100732f5b9eb8900e81895bf0" title="Cancels pending graceful actions." alt="" coords="1283,369,1563,411"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="1283,435,1562,476"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,220,905,261"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,220,579,261"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,155,595,196"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,285,585,327"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,351,288,392"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog." alt="" coords="973,435,1205,476"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0e4642f1b29fff6e830c654384f8813f" title="Handle a restart of the server." alt="" coords="645,435,903,476"/>
</map>
</div>

</div>
</div>
<a id="afd81003b2e6d64f3f8240a61d44f112e" name="afd81003b2e6d64f3f8240a61d44f112e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd81003b2e6d64f3f8240a61d44f112e">&#9670;&nbsp;</a></span>HandleChatCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; string &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>commandName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a>&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a chat command.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#a70ad02e50d142d4700bf372875860774">Tgstation.Server.Host.Components.Chat.ICustomCommandHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00270">270</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  271</span>        {</div>
<div class="line"><span class="lineno">  272</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  273</span>            {</div>
<div class="line"><span class="lineno">  274</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  275</span>                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;TGS: Server offline!&quot;</span>;</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>                var commandObject = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command.html">ChatCommand</a>(sender, commandName, arguments);</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>                var command = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(commandObject);</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>                var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  282</span>                var commandResult = await activeServer.SendCommand(command, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>                <span class="keywordflow">if</span> (commandResult == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  285</span>                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;TGS: Bad topic exchange!&quot;</span>;</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>                <span class="keywordflow">if</span> (commandResult.InteropResponse == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  288</span>                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;TGS: Bad topic response!&quot;</span>;</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>                <span class="keywordflow">return</span> commandResult.InteropResponse.CommandResponseMessage ??</div>
<div class="line"><span class="lineno">  291</span>                    <span class="stringliteral">&quot;TGS: Command processed but no DMAPI response returned!&quot;</span>;</div>
<div class="line"><span class="lineno">  292</span>            }</div>
<div class="line"><span class="lineno">  293</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command.html">Tgstation.Server.Host.Components.Interop.Topic.ChatCommand</a></div><div class="ttdoc">Represents a chat command to be handled by DD.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_command_8cs_source.html#l00010">ChatCommand.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">Tgstation.Server.Host.Components.Interop.Topic.TopicParameters</a></div><div class="ttdoc">Parameters for a topic request.</div><div class="ttdef"><b>Definition:</b> <a href="_topic_parameters_8cs_source.html#l00010">TopicParameters.cs:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_afd81003b2e6d64f3f8240a61d44f112e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_afd81003b2e6d64f3f8240a61d44f112e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_afd81003b2e6d64f3f8240a61d44f112e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_afd81003b2e6d64f3f8240a61d44f112e_cgraph">
<area shape="rect" title="Handle a chat command." alt="" coords="5,39,307,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="355,5,641,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="403,71,593,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="689,63,943,119"/>
</map>
</div>

</div>
</div>
<a id="a1b043f3ab25e84bc675dd5455cbf3f52" name="a1b043f3ab25e84bc675dd5455cbf3f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b043f3ab25e84bc675dd5455cbf3f52">&#9670;&nbsp;</a></span>HandleEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task IEventConsumer. Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>&#160;</td>
          <td class="paramname"><em>eventType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; string &gt;&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a given <em>eventType</em> .  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac">Tgstation.Server.Host.Components.Events.IEventConsumer</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00431">431</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  432</span>        {</div>
<div class="line"><span class="lineno">  433</span>            <span class="keywordflow">if</span> (parameters == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  434</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(parameters));</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>            <span class="comment">// Method explicitly implemented to prevent accidental calls when this.eventConsumer should be used.</span></div>
<div class="line"><span class="lineno">  437</span>            var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>            <span class="comment">// Server may have ended</span></div>
<div class="line"><span class="lineno">  440</span>            <span class="keywordflow">if</span> (activeServer == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  441</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>            var notification = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification.html">EventNotification</a>(eventType, parameters);</div>
<div class="line"><span class="lineno">  444</span>            var result = await activeServer.SendCommand(</div>
<div class="line"><span class="lineno">  445</span>                <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(notification),</div>
<div class="line"><span class="lineno">  446</span>                cancellationToken)</div>
<div class="line"><span class="lineno">  447</span>                .ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>            <span class="keywordflow">if</span> (result?.InteropResponse?.ChatResponses != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  450</span>                <span class="keywordflow">foreach</span> (var response <span class="keywordflow">in</span> result.InteropResponse.ChatResponses)</div>
<div class="line"><span class="lineno">  451</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#ac8211cd2105b12cfe4233e999698ed9b">QueueMessage</a>(</div>
<div class="line"><span class="lineno">  452</span>                        response.Text,</div>
<div class="line"><span class="lineno">  453</span>                        response.ChannelIds</div>
<div class="line"><span class="lineno">  454</span>                            .Select(channelIdString =&gt;</div>
<div class="line"><span class="lineno">  455</span>                            {</div>
<div class="line"><span class="lineno">  456</span>                                if (UInt64.TryParse(channelIdString, out var channelId))</div>
<div class="line"><span class="lineno">  457</span>                                    return (ulong?)channelId;</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>                                return null;</div>
<div class="line"><span class="lineno">  460</span>                            })</div>
<div class="line"><span class="lineno">  461</span>                            .Where(nullableChannelId =&gt; nullableChannelId.HasValue)</div>
<div class="line"><span class="lineno">  462</span>                            .Select(nullableChannelId =&gt; nullableChannelId.Value));</div>
<div class="line"><span class="lineno">  463</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification.html">Tgstation.Server.Host.Components.Interop.Topic.EventNotification</a></div><div class="ttdoc">Data structure for TopicCommandType.EventNotification requests.</div><div class="ttdef"><b>Definition:</b> <a href="_event_notification_8cs_source.html#l00012">EventNotification.cs:13</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_ac8211cd2105b12cfe4233e999698ed9b"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#ac8211cd2105b12cfe4233e999698ed9b">Tgstation.Server.Host.Components.Chat.IChatManager.QueueMessage</a></div><div class="ttdeci">void QueueMessage(string message, IEnumerable&lt; ulong &gt; channelIds)</div><div class="ttdoc">Queue a chat message  to a given set of channelIds .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#ac8211cd2105b12cfe4233e999698ed9b">Tgstation.Server.Host.Components.Chat.IChatManager.QueueMessage()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1b043f3ab25e84bc675dd5455cbf3f52_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1b043f3ab25e84bc675dd5455cbf3f52_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1b043f3ab25e84bc675dd5455cbf3f52_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1b043f3ab25e84bc675dd5455cbf3f52_cgraph">
<area shape="rect" title="Handle a given eventType ." alt="" coords="5,39,253,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="301,5,588,47"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#ac8211cd2105b12cfe4233e999698ed9b" title="Queue a chat message &#160;to a given set of channelIds ." alt="" coords="331,71,558,112"/>
</map>
</div>

</div>
</div>
<a id="a97b5cac3c59bff5f5dab4bd5e4620042" name="a97b5cac3c59bff5f5dab4bd5e4620042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97b5cac3c59bff5f5dab4bd5e4620042">&#9670;&nbsp;</a></span>HandleHeartbeat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHeartbeat </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles a watchdog heartbeat. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in the next <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812" title="The action for the monitor loop to take when control is returned to it.">MonitorAction</a> to take.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l01011">1011</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1012</span>        {</div>
<div class="line"><span class="lineno"> 1013</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Sending heartbeat to active server...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1014</span>            var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno"> 1015</span>            var response = await activeServer.SendCommand(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(), cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>            var shouldShutdown = activeServer.RebootState == Session.RebootState.Shutdown;</div>
<div class="line"><span class="lineno"> 1018</span>            <span class="keywordflow">if</span> (response == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1019</span>            {</div>
<div class="line"><span class="lineno"> 1020</span>                <span class="keywordflow">switch</span> (++<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abaf0a71134899c397cc88eb39a189ff0">heartbeatsMissed</a>)</div>
<div class="line"><span class="lineno"> 1021</span>                {</div>
<div class="line"><span class="lineno"> 1022</span>                    <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno"> 1023</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;DEFCON 4: DreamDaemon missed first heartbeat!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1024</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1025</span>                    <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno"> 1026</span>                        var message2 = <span class="stringliteral">&quot;DEFCON 3: DreamDaemon has missed 2 heartbeats!&quot;</span>;</div>
<div class="line"><span class="lineno"> 1027</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(message2);</div>
<div class="line"><span class="lineno"> 1028</span>                        await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(message2, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1029</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1030</span>                    <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno"> 1031</span>                        var actionToTake = shouldShutdown</div>
<div class="line"><span class="lineno"> 1032</span>                            ? <span class="stringliteral">&quot;shutdown&quot;</span></div>
<div class="line"><span class="lineno"> 1033</span>                            : <span class="stringliteral">&quot;be restarted&quot;</span>;</div>
<div class="line"><span class="lineno"> 1034</span>                        var message3 = $<span class="stringliteral">&quot;DEFCON 2: DreamDaemon has missed 3 heartbeats! If it does not respond to the next one, the watchdog will {actionToTake}!&quot;</span>;</div>
<div class="line"><span class="lineno"> 1035</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(message3);</div>
<div class="line"><span class="lineno"> 1036</span>                        await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(message3, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1037</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1038</span>                    <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno"> 1039</span>                        var actionTaken = shouldShutdown</div>
<div class="line"><span class="lineno"> 1040</span>                            ? <span class="stringliteral">&quot;Shutting down due to graceful termination request&quot;</span></div>
<div class="line"><span class="lineno"> 1041</span>                            : <span class="stringliteral">&quot;Restarting&quot;</span>;</div>
<div class="line"><span class="lineno"> 1042</span>                        var message4 = $<span class="stringliteral">&quot;DEFCON 1: Four heartbeats have been missed! {actionTaken}...&quot;</span>;</div>
<div class="line"><span class="lineno"> 1043</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(message4);</div>
<div class="line"><span class="lineno"> 1044</span>                        await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(message4, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1045</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1046</span>                        <span class="keywordflow">return</span> shouldShutdown ? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit : <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Restart;</div>
<div class="line"><span class="lineno"> 1047</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1048</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(<span class="stringliteral">&quot;Invalid heartbeats missed count: {0}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abaf0a71134899c397cc88eb39a189ff0">heartbeatsMissed</a>);</div>
<div class="line"><span class="lineno"> 1049</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1050</span>                }</div>
<div class="line"><span class="lineno"> 1051</span>            }</div>
<div class="line"><span class="lineno"> 1052</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1053</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abaf0a71134899c397cc88eb39a189ff0">heartbeatsMissed</a> = 0;</div>
<div class="line"><span class="lineno"> 1054</span> </div>
<div class="line"><span class="lineno"> 1055</span>            <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno"> 1056</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_abaf0a71134899c397cc88eb39a189ff0"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abaf0a71134899c397cc88eb39a189ff0">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.heartbeatsMissed</a></div><div class="ttdeci">int heartbeatsMissed</div><div class="ttdoc">The number of hearbeats missed.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00156">WatchdogBase.cs:156</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_a1f6855c98ad2fd9d071eb31236630258"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage</a></div><div class="ttdeci">Task QueueWatchdogMessage(string message, CancellationToken cancellationToken)</div><div class="ttdoc">Queue a chat message  to configured watchdog channels.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_html_a97c1a4a168451bd7e3be23c467aa2812"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">Tgstation.Server.Host.Components.Watchdog.MonitorAction</a></div><div class="ttdeci">MonitorAction</div><div class="ttdoc">The action for the monitor loop to take when control is returned to it.</div><div class="ttdef"><b>Definition:</b> <a href="_monitor_action_8cs_source.html#l00006">MonitorAction.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00156">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.heartbeatsMissed</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a97b5cac3c59bff5f5dab4bd5e4620042_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a97b5cac3c59bff5f5dab4bd5e4620042_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a97b5cac3c59bff5f5dab4bd5e4620042_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a97b5cac3c59bff5f5dab4bd5e4620042_cgraph">
<area shape="rect" title="Handles a watchdog heartbeat." alt="" coords="5,149,277,191"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="335,70,602,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="325,149,612,191"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="326,215,611,256"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="680,5,907,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="660,70,927,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="698,149,889,191"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="987,5,1216,47"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1276,5,1485,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="975,142,1228,198"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a97b5cac3c59bff5f5dab4bd5e4620042_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a97b5cac3c59bff5f5dab4bd5e4620042_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a97b5cac3c59bff5f5dab4bd5e4620042_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a97b5cac3c59bff5f5dab4bd5e4620042_icgraph">
<area shape="rect" title="Handles a watchdog heartbeat." alt="" coords="1272,41,1544,83"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,41,1224,83"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,71,905,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,71,579,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,136,579,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,201,585,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,136,288,177"/>
</map>
</div>

</div>
</div>
<a id="a0ddddb5064444b1786a360d85c3c3873" name="a0ddddb5064444b1786a360d85c3c3873"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddddb5064444b1786a360d85c3c3873">&#9670;&nbsp;</a></span>HandleMonitorWakeup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract Task&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>&#160;</td>
          <td class="paramname"><em>activationReason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the actions to take when the monitor has to "wake up". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">activationReason</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9" title="Reasons for the monitor to wake up.">MonitorActivationReason</a> that caused the invocation. Will never be <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9a83622997d22f5f18b9b09bd364cb673e" title="A heartbeat is required.">MonitorActivationReason.Heartbeat</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in the <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812" title="The action for the monitor loop to take when control is returned to it.">MonitorAction</a> to take.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a7f6314f04d25300b61c73a5fdede8cfb">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0ddddb5064444b1786a360d85c3c3873_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0ddddb5064444b1786a360d85c3c3873_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0ddddb5064444b1786a360d85c3c3873_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0ddddb5064444b1786a360d85c3c3873_icgraph">
<area shape="rect" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="1272,41,1577,83"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,41,1224,83"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,71,905,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,71,579,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,136,579,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,201,585,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,136,288,177"/>
</map>
</div>

</div>
</div>
<a id="a3067474bf7404758391b6412e2f6454a" name="a3067474bf7404758391b6412e2f6454a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3067474bf7404758391b6412e2f6454a">&#9670;&nbsp;</a></span>HandleNonRelayedEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleNonRelayedEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>&#160;</td>
          <td class="paramname"><em>eventType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; string &gt;&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a given <em>eventType</em>  without re-throwing errors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventType</td><td>The EventType.</td></tr>
    <tr><td class="paramname">parameters</td><td>An IEnumerable&lt;T&gt; of string parameters for <em>eventType</em> .</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00686">686</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  687</span>        {</div>
<div class="line"><span class="lineno">  688</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  689</span>            {</div>
<div class="line"><span class="lineno">  690</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac">HandleEvent</a>(eventType, parameters, cancellationToken);</div>
<div class="line"><span class="lineno">  691</span>            }</div>
<div class="line"><span class="lineno">  692</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a> ex)</div>
<div class="line"><span class="lineno">  693</span>            {</div>
<div class="line"><span class="lineno">  694</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(ex, <span class="stringliteral">&quot;Suppressing exception triggered by event!&quot;</span>);</div>
<div class="line"><span class="lineno">  695</span>            }</div>
<div class="line"><span class="lineno">  696</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer_html_ac217567aa6bd7e43c8cfd976eee05aac"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent</a></div><div class="ttdeci">Task HandleEvent(EventType eventType, IEnumerable&lt; string &gt; parameters, CancellationToken cancellationToken)</div><div class="ttdoc">Handle a given eventType .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00111">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00106">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a3067474bf7404758391b6412e2f6454a_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a3067474bf7404758391b6412e2f6454a_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a3067474bf7404758391b6412e2f6454a_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a3067474bf7404758391b6412e2f6454a_cgraph">
<area shape="rect" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="5,5,324,47"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="372,5,611,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a3067474bf7404758391b6412e2f6454a_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a3067474bf7404758391b6412e2f6454a_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a3067474bf7404758391b6412e2f6454a_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a3067474bf7404758391b6412e2f6454a_icgraph">
<area shape="rect" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="999,163,1317,204"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a7f6314f04d25300b61c73a5fdede8cfb" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="643,97,951,139"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="665,163,928,204"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="657,253,936,295"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,5,579,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,71,595,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,253,579,295"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,136,585,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,129,282,171"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,253,288,295"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog." alt="" coords="349,319,581,360"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0e4642f1b29fff6e830c654384f8813f" title="Handle a restart of the server." alt="" coords="18,319,275,360"/>
</map>
</div>

</div>
</div>
<a id="a0e4642f1b29fff6e830c654384f8813f" name="a0e4642f1b29fff6e830c654384f8813f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e4642f1b29fff6e830c654384f8813f">&#9670;&nbsp;</a></span>HandleRestart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart </td>
          <td>(</td>
          <td class="paramtype">Version&#160;</td>
          <td class="paramname"><em>updateVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a restart of the server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a03028e6082b0e88e2d46c4c9ea0e7af7">Tgstation.Server.Host.Core.IRestartHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00384">384</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  385</span>        {</div>
<div class="line"><span class="lineno">  386</span>            <span class="keywordflow">if</span> (graceful)</div>
<div class="line"><span class="lineno">  387</span>            {</div>
<div class="line"><span class="lineno">  388</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4">Terminate</a>(<span class="keyword">true</span>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  391</span>                {</div>
<div class="line"><span class="lineno">  392</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Waiting for server to gracefully shut down.&quot;</span>);</div>
<div class="line"><span class="lineno">  393</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a>.WithToken(cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  394</span>                }</div>
<div class="line"><span class="lineno">  395</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  396</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Graceful shutdown requested but server is already offline.&quot;</span>);</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  399</span>            }</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  402</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online)</div>
<div class="line"><span class="lineno">  403</span>                await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Detaching...&quot;</span>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  404</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  405</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Not sending detach chat message as status is: {0}&quot;</span>, <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a>);</div>
<div class="line"><span class="lineno">  406</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a49a9acdffdc9e7cd176f803b23e97ff4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate</a></div><div class="ttdeci">async Task Terminate(bool graceful, CancellationToken cancellationToken)</div><div class="ttdoc">Stops the watchdog.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00377">WatchdogBase.cs:377</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_abfb7590db69ab59a040c1ac91c671d6d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a></div><div class="ttdeci">Task monitorTask</div><div class="ttdoc">The Task running the monitor loop.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00146">WatchdogBase.cs:146</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00146">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00161">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00377">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0e4642f1b29fff6e830c654384f8813f_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0e4642f1b29fff6e830c654384f8813f_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0e4642f1b29fff6e830c654384f8813f_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0e4642f1b29fff6e830c654384f8813f_cgraph">
<area shape="rect" title="Handle a restart of the server." alt="" coords="5,89,263,131"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="934,5,1219,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog." alt="" coords="311,119,543,160"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="635,220,825,261"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="591,119,869,160"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="950,266,1203,322"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="933,201,1220,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="917,71,1236,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="955,136,1199,177"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="1284,71,1523,112"/>
</map>
</div>

</div>
</div>
<a id="aea6ea203494afd514530ef26724194fa" name="aea6ea203494afd514530ef26724194fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea6ea203494afd514530ef26724194fa">&#9670;&nbsp;</a></span>InitController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>chatTask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a>&#160;</td>
          <td class="paramname"><em>reattachInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts all ISessionControllers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chatTask</td><td>A, possibly active, Task for an outgoing chat message.</td></tr>
    <tr><td class="paramname">reattachInfo</td><td>ReattachInformation to use, if any.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a0abae67fe2b0edafd6b6ef7b9173862c">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>, and <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_posix_watchdog.html#aa9454edd6f7300c49be3e349501b2f37">Tgstation.Server.Host.Components.Watchdog.PosixWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00609">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aea6ea203494afd514530ef26724194fa_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aea6ea203494afd514530ef26724194fa_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aea6ea203494afd514530ef26724194fa_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aea6ea203494afd514530ef26724194fa_icgraph">
<area shape="rect" title="Starts all ISessionControllers." alt="" coords="956,203,1203,244"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="644,137,907,179"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="643,235,908,276"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,39,579,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,104,595,145"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,169,579,211"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,235,585,276"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,43,282,84"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,169,288,211"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a0abae67fe2b0edafd6b6ef7b9173862c" title="Starts all ISessionControllers." alt="" coords="340,300,591,341"/>
</map>
</div>

</div>
</div>
<a id="a3ca371ec92c273cd6b3ab2f6931f8a65" name="a3ca371ec92c273cd6b3ab2f6931f8a65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ca371ec92c273cd6b3ab2f6931f8a65">&#9670;&nbsp;</a></span>InstanceRenamed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InstanceRenamed </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>newInstanceName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a69fed1472e47f53392237645d5d65d7a">Tgstation.Server.Host.Components.IRenameNotifyee</a>.</p>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#aea63863a921d33b97558500dab1b74e3">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

</div>
</div>
<a id="af619caa031c183aa1aa5adbcf11a3434" name="af619caa031c183aa1aa5adbcf11a3434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af619caa031c183aa1aa5adbcf11a3434">&#9670;&nbsp;</a></span>Launch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afa6b3f10617f13ae7af79317594020e3">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00296">296</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  297</span>        {</div>
<div class="line"><span class="lineno">  298</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  299</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogRunning);</div>
<div class="line"><span class="lineno">  300</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  301</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">null</span>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  302</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_af5d1f2571cdce3431ab477a9c9c3e6f4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock</a></div><div class="ttdeci">async Task LaunchNoLock(bool startMonitor, bool announce, bool announceFailure, ReattachInformation reattachInfo, CancellationToken cancellationToken)</div><div class="ttdoc">Launches the watchdog.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00483">WatchdogBase.cs:483</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af619caa031c183aa1aa5adbcf11a3434_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af619caa031c183aa1aa5adbcf11a3434_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af619caa031c183aa1aa5adbcf11a3434_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af619caa031c183aa1aa5adbcf11a3434_cgraph">
<area shape="rect" title="Start the IWatchdog." alt="" coords="5,399,232,440"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="280,201,543,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="1683,504,1874,545"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="591,107,909,148"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers." alt="" coords="627,172,873,213"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="615,319,885,360"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1311,231,1597,272"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="991,107,1229,148"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1321,350,1587,406"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1311,448,1597,489"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="974,407,1246,448"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="957,289,1263,331"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="981,172,1239,213"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="1665,393,1892,435"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1645,314,1912,370"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1972,393,2201,435"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2261,393,2471,435"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="1960,497,2213,553"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7" title="Create a Task that completes after a given timeSpan ." alt="" coords="1363,113,1545,155"/>
</map>
</div>

</div>
</div>
<a id="af5d1f2571cdce3431ab477a9c9c3e6f4" name="af5d1f2571cdce3431ab477a9c9c3e6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5d1f2571cdce3431ab477a9c9c3e6f4">&#9670;&nbsp;</a></span>LaunchNoLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startMonitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announceFailure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a>&#160;</td>
          <td class="paramname"><em>reattachInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Launches the watchdog. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startMonitor</td><td>If <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a> should be started by this function.</td></tr>
    <tr><td class="paramname">announce</td><td>If the launch should be announced to chat by this function.</td></tr>
    <tr><td class="paramname">announceFailure</td><td>If launch failure should be announced to chat by this function.</td></tr>
    <tr><td class="paramname">reattachInfo</td><td>ReattachInformation to use, if any.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00483">483</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  489</span>        {</div>
<div class="line"><span class="lineno">  490</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Begin LaunchImplNoLock&quot;</span>);</div>
<div class="line"><span class="lineno">  491</span>            <span class="keywordflow">if</span> (startMonitor &amp;&amp; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  492</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogRunning);</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>            <span class="keywordflow">if</span> (reattachInfo == <span class="keyword">null</span> &amp;&amp; !<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6072027691530ddea3454b05d1d6e322">DmbAvailable</a>)</div>
<div class="line"><span class="lineno">  495</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogCompileJobCorrupted);</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>            <span class="comment">// this is necessary, the monitor could be in it&#39;s sleep loop trying to restart, if so cancel THAT monitor and start our own with blackjack and hookers</span></div>
<div class="line"><span class="lineno">  498</span>            Task announceTask;</div>
<div class="line"><span class="lineno">  499</span>            <span class="keywordflow">if</span> (announce)</div>
<div class="line"><span class="lineno">  500</span>            {</div>
<div class="line"><span class="lineno">  501</span>                announceTask = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno">  502</span>                    reattachInfo == <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  503</span>                        ? <span class="stringliteral">&quot;Launching...&quot;</span></div>
<div class="line"><span class="lineno">  504</span>                        : <span class="stringliteral">&quot;Reattaching...&quot;</span>,</div>
<div class="line"><span class="lineno">  505</span>                    cancellationToken); <span class="comment">// simple announce</span></div>
<div class="line"><span class="lineno">  506</span>                <span class="keywordflow">if</span> (reattachInfo == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  507</span>                    announceTask = Task.WhenAll(</div>
<div class="line"><span class="lineno">  508</span>                        <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a">HandleNonRelayedEvent</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogLaunch, Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(), cancellationToken),</div>
<div class="line"><span class="lineno">  509</span>                        announceTask);</div>
<div class="line"><span class="lineno">  510</span>            }</div>
<div class="line"><span class="lineno">  511</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  512</span>                announceTask = Task.CompletedTask; <span class="comment">// no announce</span></div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>            <span class="comment">// since neither server is running, this is safe to do</span></div>
<div class="line"><span class="lineno">  515</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">LastLaunchParameters</a> = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>;</div>
<div class="line"><span class="lineno">  516</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abaf0a71134899c397cc88eb39a189ff0">heartbeatsMissed</a> = 0;</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  519</span>            {</div>
<div class="line"><span class="lineno">  520</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa">InitController</a>(announceTask, reattachInfo, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  521</span>            }</div>
<div class="line"><span class="lineno">  522</span>            <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  523</span>            {</div>
<div class="line"><span class="lineno">  524</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(ex, <span class="stringliteral">&quot;Controller initialization cancelled!&quot;</span>);</div>
<div class="line"><span class="lineno">  525</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  526</span>            }</div>
<div class="line"><span class="lineno">  527</span>            <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><span class="lineno">  528</span>            {</div>
<div class="line"><span class="lineno">  529</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(e, <span class="stringliteral">&quot;Failed to start watchdog!&quot;</span>);</div>
<div class="line"><span class="lineno">  530</span>                var originalChatTask = announceTask;</div>
<div class="line"><span class="lineno">  531</span>                async Task ChainChatTaskWithErrorMessage()</div>
<div class="line"><span class="lineno">  532</span>                {</div>
<div class="line"><span class="lineno">  533</span>                    await originalChatTask.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  534</span>                    <span class="keywordflow">if</span> (announceFailure)</div>
<div class="line"><span class="lineno">  535</span>                        await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Startup failed!&quot;</span>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  536</span>                }</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>                announceTask = ChainChatTaskWithErrorMessage();</div>
<div class="line"><span class="lineno">  539</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  540</span>            }</div>
<div class="line"><span class="lineno">  541</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  542</span>            {</div>
<div class="line"><span class="lineno">  543</span>                <span class="comment">// finish the chat task that&#39;s in flight</span></div>
<div class="line"><span class="lineno">  544</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  545</span>                {</div>
<div class="line"><span class="lineno">  546</span>                    await announceTask.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  547</span>                }</div>
<div class="line"><span class="lineno">  548</span>                <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  549</span>                {</div>
<div class="line"><span class="lineno">  550</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(ex, <span class="stringliteral">&quot;Announcement task canceled!&quot;</span>);</div>
<div class="line"><span class="lineno">  551</span>                }</div>
<div class="line"><span class="lineno">  552</span>            }</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Controller(s) initialized successfully&quot;</span>);</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>            <span class="keywordflow">if</span> (startMonitor)</div>
<div class="line"><span class="lineno">  557</span>            {</div>
<div class="line"><span class="lineno">  558</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  559</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">MonitorLifetimes</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a>.Token);</div>
<div class="line"><span class="lineno">  560</span>            }</div>
<div class="line"><span class="lineno">  561</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html_a6072027691530ddea3454b05d1d6e322"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6072027691530ddea3454b05d1d6e322">Tgstation.Server.Host.Components.Deployment.DmbFactory.DmbAvailable</a></div><div class="ttdeci">bool DmbAvailable</div><div class="ttdoc">If LockNextDmb will succeed.</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00034">DmbFactory.cs:34</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a3067474bf7404758391b6412e2f6454a"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleNonRelayedEvent</a></div><div class="ttdeci">async Task HandleNonRelayedEvent(EventType eventType, IEnumerable&lt; string &gt; parameters, CancellationToken cancellationToken)</div><div class="ttdoc">Handle a given eventType  without re-throwing errors.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00686">WatchdogBase.cs:686</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a6548572ef5ab9d7b6b3aae8647a0a053"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a></div><div class="ttdeci">DreamDaemonLaunchParameters LastLaunchParameters</div><div class="ttdoc">The DreamDaemonLaunchParameters to be applied.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00050">WatchdogBase.cs:50</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_adfec26f530228b80d384b86ee979ef2f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes</a></div><div class="ttdeci">async Task MonitorLifetimes(CancellationToken cancellationToken)</div><div class="ttdoc">The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00763">WatchdogBase.cs:763</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aea6ea203494afd514530ef26724194fa"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController</a></div><div class="ttdeci">abstract Task InitController(Task chatTask, ReattachInformation reattachInfo, CancellationToken cancellationToken)</div><div class="ttdoc">Starts all ISessionControllers.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_html_ac30c818717e92c8fb65f389adec739b7"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">Tgstation.Server.Host.Components.Events.EventType</a></div><div class="ttdeci">EventType</div><div class="ttdoc">Types of events. Mirror in tgs.dm.</div><div class="ttdef"><b>Definition:</b> <a href="_event_type_8cs_source.html#l00006">EventType.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00047">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_dmb_factory_8cs_source.html#l00034">Tgstation.Server.Host.Components.Deployment.DmbFactory.DmbAvailable</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00686">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleNonRelayedEvent()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00156">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.heartbeatsMissed</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00050">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00141">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00146">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00296">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00703">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00318">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00343">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_cgraph">
<area shape="rect" title="Launches the watchdog." alt="" coords="5,152,268,193"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="316,13,635,55"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers." alt="" coords="352,93,599,135"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="340,240,611,281"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1037,311,1322,352"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="716,5,955,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1046,211,1313,267"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="1409,129,1599,171"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1036,401,1323,443"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="699,356,971,397"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="683,188,988,229"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="706,71,965,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="1391,285,1617,327"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1371,206,1637,262"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1697,285,1927,327"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1987,285,2196,327"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="1685,122,1939,178"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7" title="Create a Task that completes after a given timeSpan ." alt="" coords="1089,20,1270,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_icgraph">
<area shape="rect" title="Launches the watchdog." alt="" coords="643,136,905,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,5,579,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,136,595,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,71,579,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,201,585,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,197,282,239"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,71,288,112"/>
</map>
</div>

</div>
</div>
<a id="adfec26f530228b80d384b86ee979ef2f" name="adfec26f530228b80d384b86ee979ef2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfec26f530228b80d384b86ee979ef2f">&#9670;&nbsp;</a></span>MonitorLifetimes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00763">763</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  764</span>        {</div>
<div class="line"><span class="lineno">  765</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Entered MonitorLifetimes&quot;</span>);</div>
<div class="line"><span class="lineno">  766</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online;</div>
<div class="line"><span class="lineno">  767</span>            <span class="keyword">using</span> var cancellationTokenLoggingRegistration = cancellationToken.Register(() =&gt; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor cancellationToken triggered&quot;</span>));</div>
<div class="line"><span class="lineno">  768</span> </div>
<div class="line"><span class="lineno">  769</span>            <span class="comment">// this function is responsible for calling HandlerMonitorWakeup when necessary and manitaining the MonitorState</span></div>
<div class="line"><span class="lineno">  770</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  771</span>            {</div>
<div class="line"><span class="lineno">  772</span>                <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  773</span>                Task activeServerLifetime = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  774</span>                    activeServerReboot = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  775</span>                    serverPrimed = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  776</span>                    activeLaunchParametersChanged = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  777</span>                    newDmbAvailable = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  778</span>                <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a> lastController = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  779</span>                <span class="keywordflow">for</span> (ulong iteration = 1; nextAction != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit; ++iteration)</div>
<div class="line"><span class="lineno">  780</span>                    <span class="keyword">using</span> (LogContext.PushProperty(<span class="stringliteral">&quot;Monitor&quot;</span>, iteration))</div>
<div class="line"><span class="lineno">  781</span>                        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  782</span>                        {</div>
<div class="line"><span class="lineno">  783</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Iteration {0} of monitor loop&quot;</span>, iteration);</div>
<div class="line"><span class="lineno">  784</span>                            nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>                            var controller = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>                            <span class="keywordtype">void</span> UpdateMonitoredTasks()</div>
<div class="line"><span class="lineno">  789</span>                            {</div>
<div class="line"><span class="lineno">  790</span>                                <span class="keyword">static</span> <span class="keywordtype">void</span> TryUpdateTask(ref Task oldTask, Task newTask)</div>
<div class="line"><span class="lineno">  791</span>                                {</div>
<div class="line"><span class="lineno">  792</span>                                    <span class="keywordflow">if</span> (oldTask?.IsCompleted == <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  793</span>                                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>                                    oldTask = newTask;</div>
<div class="line"><span class="lineno">  796</span>                                }</div>
<div class="line"><span class="lineno">  797</span> </div>
<div class="line"><span class="lineno">  798</span>                                <span class="keywordflow">if</span> (lastController == controller)</div>
<div class="line"><span class="lineno">  799</span>                                {</div>
<div class="line"><span class="lineno">  800</span>                                    TryUpdateTask(ref activeServerLifetime, controller.Lifetime);</div>
<div class="line"><span class="lineno">  801</span>                                    TryUpdateTask(ref activeServerReboot, controller.OnReboot);</div>
<div class="line"><span class="lineno">  802</span>                                    TryUpdateTask(ref serverPrimed, controller.OnPrime);</div>
<div class="line"><span class="lineno">  803</span>                                }</div>
<div class="line"><span class="lineno">  804</span>                                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  805</span>                                {</div>
<div class="line"><span class="lineno">  806</span>                                    activeServerLifetime = controller.Lifetime;</div>
<div class="line"><span class="lineno">  807</span>                                    activeServerReboot = controller.OnReboot;</div>
<div class="line"><span class="lineno">  808</span>                                    serverPrimed = controller.OnPrime;</div>
<div class="line"><span class="lineno">  809</span>                                    lastController = controller;</div>
<div class="line"><span class="lineno">  810</span>                                }</div>
<div class="line"><span class="lineno">  811</span> </div>
<div class="line"><span class="lineno">  812</span>                                TryUpdateTask(ref activeLaunchParametersChanged, <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#afee401fd5e0d23482b77498b6ec23a03">ActiveParametersUpdated</a>.Task);</div>
<div class="line"><span class="lineno">  813</span>                                TryUpdateTask(ref newDmbAvailable, <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#ab61dd81459c04b375182d4a0c8c4cdfe">OnNewerDmb</a>);</div>
<div class="line"><span class="lineno">  814</span>                            }</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>                            UpdateMonitoredTasks();</div>
<div class="line"><span class="lineno">  817</span> </div>
<div class="line"><span class="lineno">  818</span>                            var heartbeatSeconds = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a15ea3f57d3c8d953d2b12386469c73b2">HeartbeatSeconds</a>.Value;</div>
<div class="line"><span class="lineno">  819</span>                            var heartbeat = heartbeatSeconds == 0</div>
<div class="line"><span class="lineno">  820</span>                                || !controller.DMApiAvailable</div>
<div class="line"><span class="lineno">  821</span>                                ? Extensions.TaskExtensions.InfiniteTask()</div>
<div class="line"><span class="lineno">  822</span>                                : Task.Delay(</div>
<div class="line"><span class="lineno">  823</span>                                    TimeSpan.FromSeconds(heartbeatSeconds),</div>
<div class="line"><span class="lineno">  824</span>                                    cancellationToken);</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>                            <span class="comment">// cancel waiting if requested</span></div>
<div class="line"><span class="lineno">  827</span>                            var cancelTcs = <span class="keyword">new</span> TaskCompletionSource&lt;object&gt;();</div>
<div class="line"><span class="lineno">  828</span>                            var toWaitOn = Task.WhenAny(</div>
<div class="line"><span class="lineno">  829</span>                                activeServerLifetime,</div>
<div class="line"><span class="lineno">  830</span>                                activeServerReboot,</div>
<div class="line"><span class="lineno">  831</span>                                heartbeat,</div>
<div class="line"><span class="lineno">  832</span>                                newDmbAvailable,</div>
<div class="line"><span class="lineno">  833</span>                                cancelTcs.Task,</div>
<div class="line"><span class="lineno">  834</span>                                activeLaunchParametersChanged,</div>
<div class="line"><span class="lineno">  835</span>                                serverPrimed);</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>                            <span class="comment">// wait for something to happen</span></div>
<div class="line"><span class="lineno">  838</span>                            <span class="keyword">using</span> (cancellationToken.Register(() =&gt; cancelTcs.SetCanceled()))</div>
<div class="line"><span class="lineno">  839</span>                                await toWaitOn.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>                            cancellationToken.ThrowIfCancellationRequested();</div>
<div class="line"><span class="lineno">  842</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor activated&quot;</span>);</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>                            <span class="comment">// always run HandleMonitorWakeup from the context of the semaphore lock</span></div>
<div class="line"><span class="lineno">  845</span>                            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  846</span>                            {</div>
<div class="line"><span class="lineno">  847</span>                                <span class="comment">// Set this sooner so chat sends don&#39;t hold us up</span></div>
<div class="line"><span class="lineno">  848</span>                                <span class="keywordflow">if</span> (activeServerLifetime.IsCompleted)</div>
<div class="line"><span class="lineno">  849</span>                                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Restoring;</div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span>                                <span class="comment">// multiple things may have happened, handle them one at a time</span></div>
<div class="line"><span class="lineno">  852</span>                                <span class="keywordflow">for</span> (var moreActivationsToProcess = <span class="keyword">true</span>; moreActivationsToProcess &amp;&amp; (nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue || nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Skip);)</div>
<div class="line"><span class="lineno">  853</span>                                {</div>
<div class="line"><span class="lineno">  854</span>                                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> activationReason = <span class="keywordflow">default</span>; <span class="comment">// this will always be assigned before being used</span></div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>                                    <span class="keywordtype">bool</span> CheckActivationReason(ref Task task, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> testActivationReason)</div>
<div class="line"><span class="lineno">  857</span>                                    {</div>
<div class="line"><span class="lineno">  858</span>                                        var taskCompleted = task?.IsCompleted == <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  859</span>                                        task = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  860</span>                                        <span class="keywordflow">if</span> (nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Skip)</div>
<div class="line"><span class="lineno">  861</span>                                            nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  862</span>                                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (taskCompleted)</div>
<div class="line"><span class="lineno">  863</span>                                        {</div>
<div class="line"><span class="lineno">  864</span>                                            activationReason = testActivationReason;</div>
<div class="line"><span class="lineno">  865</span>                                            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  866</span>                                        }</div>
<div class="line"><span class="lineno">  867</span> </div>
<div class="line"><span class="lineno">  868</span>                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  869</span>                                    }</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>                                    <span class="comment">// process the tasks in this order and call HandlerMonitorWakup for each depending on the new monitorState</span></div>
<div class="line"><span class="lineno">  872</span>                                    var anyActivation = CheckActivationReason(ref activeServerLifetime, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerCrashed)</div>
<div class="line"><span class="lineno">  873</span>                                        || CheckActivationReason(ref activeServerReboot, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerRebooted)</div>
<div class="line"><span class="lineno">  874</span>                                        || CheckActivationReason(ref newDmbAvailable, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.NewDmbAvailable)</div>
<div class="line"><span class="lineno">  875</span>                                        || CheckActivationReason(ref activeLaunchParametersChanged, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveLaunchParametersUpdated)</div>
<div class="line"><span class="lineno">  876</span>                                        || CheckActivationReason(ref heartbeat, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.Heartbeat)</div>
<div class="line"><span class="lineno">  877</span>                                        || CheckActivationReason(ref serverPrimed, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerPrimed);</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>                                    UpdateMonitoredTasks();</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>                                    <span class="keywordflow">if</span> (!anyActivation)</div>
<div class="line"><span class="lineno">  882</span>                                        moreActivationsToProcess = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  883</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  884</span>                                    {</div>
<div class="line"><span class="lineno">  885</span>                                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Reason: {0}&quot;</span>, activationReason);</div>
<div class="line"><span class="lineno">  886</span>                                        <span class="keywordflow">if</span> (activationReason == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.Heartbeat)</div>
<div class="line"><span class="lineno">  887</span>                                            nextAction = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042">HandleHeartbeat</a>(</div>
<div class="line"><span class="lineno">  888</span>                                                cancellationToken)</div>
<div class="line"><span class="lineno">  889</span>                                                .ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  890</span>                                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  891</span>                                            nextAction = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">HandleMonitorWakeup</a>(</div>
<div class="line"><span class="lineno">  892</span>                                                activationReason,</div>
<div class="line"><span class="lineno">  893</span>                                                cancellationToken)</div>
<div class="line"><span class="lineno">  894</span>                                                .ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  895</span>                                    }</div>
<div class="line"><span class="lineno">  896</span>                                }</div>
<div class="line"><span class="lineno">  897</span>                            }</div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Next monitor action is to {0}&quot;</span>, nextAction);</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>                            <span class="comment">// Restart if requested</span></div>
<div class="line"><span class="lineno">  902</span>                            <span class="keywordflow">if</span> (nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Restart)</div>
<div class="line"><span class="lineno">  903</span>                            {</div>
<div class="line"><span class="lineno">  904</span>                                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">MonitorRestart</a>(cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  905</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  906</span>                            }</div>
<div class="line"><span class="lineno">  907</span>                        }</div>
<div class="line"><span class="lineno">  908</span>                        <span class="keywordflow">catch</span> (OperationCanceledException)</div>
<div class="line"><span class="lineno">  909</span>                        {</div>
<div class="line"><span class="lineno">  910</span>                            <span class="comment">// let this bubble, other exceptions caught below</span></div>
<div class="line"><span class="lineno">  911</span>                            <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  912</span>                        }</div>
<div class="line"><span class="lineno">  913</span>                        <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><span class="lineno">  914</span>                        {</div>
<div class="line"><span class="lineno">  915</span>                            <span class="comment">// really, this should NEVER happen</span></div>
<div class="line"><span class="lineno">  916</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(</div>
<div class="line"><span class="lineno">  917</span>                                e,</div>
<div class="line"><span class="lineno">  918</span>                                <span class="stringliteral">&quot;Monitor crashed! Iteration: {0}&quot;</span>,</div>
<div class="line"><span class="lineno">  919</span>                                iteration);</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>                            var nextActionMessage = nextAction != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit</div>
<div class="line"><span class="lineno">  922</span>                                ? <span class="stringliteral">&quot;Recovering&quot;</span></div>
<div class="line"><span class="lineno">  923</span>                                : <span class="stringliteral">&quot;Shutting down&quot;</span>;</div>
<div class="line"><span class="lineno">  924</span>                            var chatTask = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno">  925</span>                                $<span class="stringliteral">&quot;Monitor crashed, this should NEVER happen! Please report this, full details in logs! {nextActionMessage}. Error: {e.Message}&quot;</span>,</div>
<div class="line"><span class="lineno">  926</span>                                cancellationToken);</div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a>)</div>
<div class="line"><span class="lineno">  929</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit;</div>
<div class="line"><span class="lineno">  930</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextAction != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit)</div>
<div class="line"><span class="lineno">  931</span>                            {</div>
<div class="line"><span class="lineno">  932</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>()?.Lifetime.IsCompleted != <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  933</span>                                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">MonitorRestart</a>(cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  934</span>                                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  935</span>                                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Server seems to be okay, not restarting&quot;</span>);</div>
<div class="line"><span class="lineno">  936</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  937</span>                            }</div>
<div class="line"><span class="lineno">  938</span> </div>
<div class="line"><span class="lineno">  939</span>                            await chatTask.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  940</span>                        }</div>
<div class="line"><span class="lineno">  941</span>            }</div>
<div class="line"><span class="lineno">  942</span>            <span class="keywordflow">catch</span> (OperationCanceledException)</div>
<div class="line"><span class="lineno">  943</span>            {</div>
<div class="line"><span class="lineno">  944</span>                <span class="comment">// stop signal</span></div>
<div class="line"><span class="lineno">  945</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Monitor cancelled&quot;</span>);</div>
<div class="line"><span class="lineno">  946</span> </div>
<div class="line"><span class="lineno">  947</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>)</div>
<div class="line"><span class="lineno">  948</span>                {</div>
<div class="line"><span class="lineno">  949</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Detaching server...&quot;</span>);</div>
<div class="line"><span class="lineno">  950</span>                    var controller = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  951</span>                    await controller.Release().ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  952</span>                }</div>
<div class="line"><span class="lineno">  953</span>            }</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>            <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  956</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(<span class="keywordflow">default</span>).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  957</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline;</div>
<div class="line"><span class="lineno">  958</span> </div>
<div class="line"><span class="lineno">  959</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor exiting...&quot;</span>);</div>
<div class="line"><span class="lineno">  960</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_a15ea3f57d3c8d953d2b12386469c73b2"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a15ea3f57d3c8d953d2b12386469c73b2">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.HeartbeatSeconds</a></div><div class="ttdeci">uint? HeartbeatSeconds</div><div class="ttdoc">The number of seconds between each watchdog heartbeat. 0 disables.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00055">DreamDaemonLaunchParameters.cs:55</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html_ab61dd81459c04b375182d4a0c8c4cdfe"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#ab61dd81459c04b375182d4a0c8c4cdfe">Tgstation.Server.Host.Components.Deployment.DmbFactory.OnNewerDmb</a></div><div class="ttdeci">Task OnNewerDmb</div><div class="ttdoc">Get a Task that completes when the result of a call to LockNextDmb will be different than the previou...</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00024">DmbFactory.cs:25</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a0ddddb5064444b1786a360d85c3c3873"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup</a></div><div class="ttdeci">abstract Task&lt; MonitorAction &gt; HandleMonitorWakeup(MonitorActivationReason activationReason, CancellationToken cancellationToken)</div><div class="ttdoc">Handles the actions to take when the monitor has to &quot;wake up&quot;.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a24fd29d12e91f659010d483228be1225"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart</a></div><div class="ttdeci">async Task MonitorRestart(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to restart the monitor from scratch.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00703">WatchdogBase.cs:703</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a97b5cac3c59bff5f5dab4bd5e4620042"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHeartbeat</a></div><div class="ttdeci">async Task&lt; MonitorAction &gt; HandleHeartbeat(CancellationToken cancellationToken)</div><div class="ttdoc">Handles a watchdog heartbeat.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l01011">WatchdogBase.cs:1011</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">Tgstation.Server.Host.Components.Session.ISessionController</a></div><div class="ttdoc">Handles communication with a DreamDaemon IProcess.</div><div class="ttdef"><b>Definition:</b> <a href="_i_session_controller_8cs_source.html#l00015">ISessionController.cs:16</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_html_acb2ccc2dc05d01ec3a6448d3d57155c9"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">Tgstation.Server.Host.Components.Watchdog.MonitorActivationReason</a></div><div class="ttdeci">MonitorActivationReason</div><div class="ttdoc">Reasons for the monitor to wake up.</div><div class="ttdef"><b>Definition:</b> <a href="_monitor_activation_reason_8cs_source.html#l00006">MonitorActivationReason.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00047">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00061">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00166">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01011">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHeartbeat()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup()</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00055">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.HeartbeatSeconds</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00703">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_dmb_factory_8cs_source.html#l00025">Tgstation.Server.Host.Components.Deployment.DmbFactory.OnNewerDmb</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00161">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph">
<area shape="rect" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="5,212,276,254"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="687,118,954,174"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="1076,198,1267,239"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="677,54,964,95"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="341,183,613,224"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1029,316,1314,358"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="324,300,629,342"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="347,366,606,407"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="1058,54,1285,95"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1038,118,1305,174"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1391,54,1620,95"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1680,54,1889,95"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="1379,190,1632,246"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7" title="Create a Task that completes after a given timeSpan ." alt="" coords="730,300,911,342"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="689,468,952,510"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="1012,435,1331,476"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers." alt="" coords="1048,500,1295,542"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="1386,435,1625,476"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph">
<area shape="rect" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,41,1224,83"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,71,905,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="352,71,579,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="352,136,579,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,201,585,243"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,136,288,177"/>
</map>
</div>

</div>
</div>
<a id="a24fd29d12e91f659010d483228be1225" name="a24fd29d12e91f659010d483228be1225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24fd29d12e91f659010d483228be1225">&#9670;&nbsp;</a></span>MonitorRestart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to restart the monitor from scratch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00703">703</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  704</span>        {</div>
<div class="line"><span class="lineno">  705</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor restart!&quot;</span>);</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  708</span> </div>
<div class="line"><span class="lineno">  709</span>            var chatTask = Task.CompletedTask;</div>
<div class="line"><span class="lineno">  710</span>            <span class="keywordflow">for</span> (var retryAttempts = 1; ; ++retryAttempts)</div>
<div class="line"><span class="lineno">  711</span>            {</div>
<div class="line"><span class="lineno">  712</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Restoring;</div>
<div class="line"><span class="lineno">  713</span>                Exception launchException;</div>
<div class="line"><span class="lineno">  714</span>                <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  715</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  716</span>                    {</div>
<div class="line"><span class="lineno">  717</span>                        <span class="comment">// use LaunchImplNoLock without announcements or restarting the monitor</span></div>
<div class="line"><span class="lineno">  718</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">null</span>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  719</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online;</div>
<div class="line"><span class="lineno">  720</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Relaunch successful, resuming monitor...&quot;</span>);</div>
<div class="line"><span class="lineno">  721</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  722</span>                    }</div>
<div class="line"><span class="lineno">  723</span>                    <span class="keywordflow">catch</span> (OperationCanceledException)</div>
<div class="line"><span class="lineno">  724</span>                    {</div>
<div class="line"><span class="lineno">  725</span>                        <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  726</span>                    }</div>
<div class="line"><span class="lineno">  727</span>                    <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><span class="lineno">  728</span>                    {</div>
<div class="line"><span class="lineno">  729</span>                        launchException = e;</div>
<div class="line"><span class="lineno">  730</span>                    }</div>
<div class="line"><span class="lineno">  731</span>                    <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  732</span>                    {</div>
<div class="line"><span class="lineno">  733</span>                        await chatTask.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  734</span>                    }</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(launchException, <span class="stringliteral">&quot;Failed to automatically restart the watchdog! Attempt: {0}&quot;</span>, retryAttempts);</div>
<div class="line"><span class="lineno">  737</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.DelayedRestart;</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>                var retryDelay = Math.Min(</div>
<div class="line"><span class="lineno">  740</span>                    Convert.ToInt32(</div>
<div class="line"><span class="lineno">  741</span>                        Math.Pow(2, retryAttempts)),</div>
<div class="line"><span class="lineno">  742</span>                    TimeSpan.FromHours(1).TotalSeconds); <span class="comment">// max of one hour, increasing by a power of 2 each time</span></div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>                chatTask = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno">  745</span>                    $<span class="stringliteral">&quot;Failed to restart (Attempt: {retryAttempts}), retrying in {retryDelay}s...&quot;</span>,</div>
<div class="line"><span class="lineno">  746</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>                await Task.WhenAll(</div>
<div class="line"><span class="lineno">  749</span>                    <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html">AsyncDelayer</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7">Delay</a>(</div>
<div class="line"><span class="lineno">  750</span>                        TimeSpan.FromSeconds(retryDelay),</div>
<div class="line"><span class="lineno">  751</span>                        cancellationToken),</div>
<div class="line"><span class="lineno">  752</span>                    chatTask)</div>
<div class="line"><span class="lineno">  753</span>                    .ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  754</span>            }</div>
<div class="line"><span class="lineno">  755</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer_html_a28ea9fb35caed002bf15a67b03d5e0c7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7">Tgstation.Server.Host.Core.AsyncDelayer.Delay</a></div><div class="ttdeci">Task Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7">Tgstation.Server.Host.Core.AsyncDelayer.Delay()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_cgraph">
<area shape="rect" title="Attempt to restart the monitor from scratch." alt="" coords="5,367,264,408"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7" title="Create a Task that completes after a given timeSpan ." alt="" coords="353,5,534,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1353,93,1619,149"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="1715,172,1906,213"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="312,509,575,551"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1343,392,1629,433"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="1697,28,1924,69"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1677,93,1944,149"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="2004,28,2233,69"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2293,28,2503,69"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="1992,165,2245,221"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="623,625,941,667"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers." alt="" coords="659,560,905,601"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="647,304,917,345"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="1023,625,1261,667"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1343,253,1629,295"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="1006,224,1278,265"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="989,392,1295,433"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_icgraph">
<area shape="rect" title="Attempt to restart the monitor from scratch." alt="" coords="1252,71,1511,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="933,41,1204,83"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="623,71,885,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog." alt="" coords="342,5,569,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="342,71,569,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="336,136,575,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,71,288,112"/>
</map>
</div>

</div>
</div>
<a id="a2a1ca4d25ec02eb53ddbcb36088331a1" name="a2a1ca4d25ec02eb53ddbcb36088331a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a1ca4d25ec02eb53ddbcb36088331a1">&#9670;&nbsp;</a></span>ReattachFailure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers.">InitController(Task, ReattachInformation, CancellationToken)</a> when a reattach operation fails to attempt a fresh start. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00609">609</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  610</span>        {</div>
<div class="line"><span class="lineno">  611</span>            <span class="comment">// we lost the server, just restart entirely</span></div>
<div class="line"><span class="lineno">  612</span>            <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  613</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(<span class="keywordflow">default</span>).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  614</span>            <span class="keyword">const</span> <span class="keywordtype">string</span> FailReattachMessage = <span class="stringliteral">&quot;Unable to properly reattach to server! Restarting watchdog...&quot;</span>;</div>
<div class="line"><span class="lineno">  615</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(FailReattachMessage);</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>            var chatTask = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(FailReattachMessage, cancellationToken);</div>
<div class="line"><span class="lineno">  618</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa">InitController</a>(chatTask, <span class="keyword">null</span>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  619</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00202">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_cgraph">
<area shape="rect" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="5,149,271,191"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="328,70,595,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers." alt="" coords="338,149,585,191"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="319,215,604,256"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="672,5,899,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="652,70,919,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="690,149,881,191"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="979,5,1208,47"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1268,5,1477,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="967,142,1220,198"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_icgraph">
<area shape="rect" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="304,5,569,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a0abae67fe2b0edafd6b6ef7b9173862c" title="Starts all ISessionControllers." alt="" coords="5,5,256,47"/>
</map>
</div>

</div>
</div>
<a id="aaf696fd100732f5b9eb8900e81895bf0" name="aaf696fd100732f5b9eb8900e81895bf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf696fd100732f5b9eb8900e81895bf0">&#9670;&nbsp;</a></span>ResetRebootState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cancels pending graceful actions.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a2859725d1805d6655be14566f9edcf00">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p>Reimplemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00305">305</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  306</span>        {</div>
<div class="line"><span class="lineno">  307</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  308</span>            {</div>
<div class="line"><span class="lineno">  309</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  310</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  311</span>                var toClear = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  312</span>                <span class="keywordflow">if</span> (toClear != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  313</span>                    await toClear.SetRebootState(Session.RebootState.Normal, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  314</span>            }</div>
<div class="line"><span class="lineno">  315</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aaf696fd100732f5b9eb8900e81895bf0_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aaf696fd100732f5b9eb8900e81895bf0_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aaf696fd100732f5b9eb8900e81895bf0_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aaf696fd100732f5b9eb8900e81895bf0_cgraph">
<area shape="rect" title="Cancels pending graceful actions." alt="" coords="5,39,285,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="333,5,620,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="381,71,572,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="668,63,921,119"/>
</map>
</div>

</div>
</div>
<a id="a39d65944835fca058d4a4be46eaf81bd" name="a39d65944835fca058d4a4be46eaf81bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39d65944835fca058d4a4be46eaf81bd">&#9670;&nbsp;</a></span>Restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restarts the watchdog.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0e80e3751764c584151e51f4395efbf5">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00318">318</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  319</span>        {</div>
<div class="line"><span class="lineno">  320</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  321</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogNotRunning);</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Begin Restart. Graceful: {0}&quot;</span>, graceful);</div>
<div class="line"><span class="lineno">  324</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  325</span>            {</div>
<div class="line"><span class="lineno">  326</span>                <span class="keywordflow">if</span> (!graceful)</div>
<div class="line"><span class="lineno">  327</span>                {</div>
<div class="line"><span class="lineno">  328</span>                    var chatTask = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Manual restart triggered...&quot;</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  329</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">TerminateNoLock</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  330</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">null</span>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  331</span>                    await chatTask.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  332</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  333</span>                }</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>                var toReboot = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  336</span>                <span class="keywordflow">if</span> (toReboot != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  337</span>                    &amp;&amp; !await toReboot.SetRebootState(Session.RebootState.Restart, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  338</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(<span class="stringliteral">&quot;Unable to send reboot state change event!&quot;</span>);</div>
<div class="line"><span class="lineno">  339</span>            }</div>
<div class="line"><span class="lineno">  340</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a6845304123ed975aec4de3dc79bf8551"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock</a></div><div class="ttdeci">async Task TerminateNoLock(bool graceful, bool announce, CancellationToken cancellationToken)</div><div class="ttdoc">Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00970">WatchdogBase.cs:970</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00093">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.ResetRebootState()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_cgraph">
<area shape="rect" title="Restarts the watchdog." alt="" coords="5,429,232,471"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1327,108,1613,149"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="288,429,551,471"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="1699,249,1890,291"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1327,516,1613,557"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="280,597,559,639"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="607,597,925,639"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers." alt="" coords="643,95,889,136"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="631,341,901,383"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="1007,597,1245,639"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1337,327,1603,383"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="990,312,1262,353"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="973,247,1279,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="997,429,1255,471"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="1681,323,1908,364"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1661,387,1928,443"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1988,323,2217,364"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2277,323,2487,364"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="1976,242,2229,298"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7" title="Create a Task that completes after a given timeSpan ." alt="" coords="1379,429,1561,471"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="644,715,888,756"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_icgraph">
<area shape="rect" title="Restarts the watchdog." alt="" coords="336,5,563,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,5,288,47"/>
</map>
</div>

</div>
</div>
<a id="ae30d4b582b04eb7c3ef3c5d848429bbd" name="ae30d4b582b04eb7c3ef3c5d848429bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae30d4b582b04eb7c3ef3c5d848429bbd">&#9670;&nbsp;</a></span>StartAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00343">343</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  344</span>        {</div>
<div class="line"><span class="lineno">  345</span>            var reattachInfo = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a1e73c7faa5f961369020355979f55ada">Load</a>(cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  346</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a> &amp;&amp; reattachInfo == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  347</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>            var job = <span class="keyword">new</span> Models.Job</div>
<div class="line"><span class="lineno">  350</span>            {</div>
<div class="line"><span class="lineno">  351</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Instance</a> = <span class="keyword">new</span> Models.Instance</div>
<div class="line"><span class="lineno">  352</span>                {</div>
<div class="line"><span class="lineno">  353</span>                    Id = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>.Id,</div>
<div class="line"><span class="lineno">  354</span>                },</div>
<div class="line"><span class="lineno">  355</span>                Description = $<span class="stringliteral">&quot;Instance startup watchdog {(reattachInfo != null ? &quot;</span>reattach<span class="stringliteral">&quot; : &quot;</span>launch<span class="stringliteral">&quot;)}&quot;</span>,</div>
<div class="line"><span class="lineno">  356</span>                CancelRight = (ulong)<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">DreamDaemonRights</a>.Shutdown,</div>
<div class="line"><span class="lineno">  357</span>                CancelRightsType = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">RightsType</a>.DreamDaemon,</div>
<div class="line"><span class="lineno">  358</span>            };</div>
<div class="line"><span class="lineno">  359</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a21be789f798adf9985f2432d3499b4cd">RegisterOperation</a>(</div>
<div class="line"><span class="lineno">  360</span>                job,</div>
<div class="line"><span class="lineno">  361</span>                async (core, databaseContextFactory, paramJob, progressFunction, ct) =&gt;</div>
<div class="line"><span class="lineno">  362</span>                {</div>
<div class="line"><span class="lineno">  363</span>                    <span class="keywordflow">if</span> (core.Watchdog != <span class="keyword">this</span>)</div>
<div class="line"><span class="lineno">  364</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Instance</a>.DifferentCoreExceptionMessage);</div>
<div class="line"><span class="lineno">  365</span>                    <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, ct).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  366</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, reattachInfo, ct).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  367</span>                },</div>
<div class="line"><span class="lineno">  368</span>                cancellationToken)</div>
<div class="line"><span class="lineno">  369</span>                .ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  370</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Tgstation.Server.Api.Models.Instance</a></div><div class="ttdoc">Metadata about a server instance.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00008">Instance.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html_a1e73c7faa5f961369020355979f55ada"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a1e73c7faa5f961369020355979f55ada">Tgstation.Server.Host.Components.Session.SessionPersistor.Load</a></div><div class="ttdeci">async Task&lt; ReattachInformation &gt; Load(CancellationToken cancellationToken)</div><div class="ttdoc">Load a saved ReattachInformation.</div><div class="ttdef"><b>Definition:</b> <a href="_session_persistor_8cs_source.html#l00093">SessionPersistor.cs:93</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager_html_a21be789f798adf9985f2432d3499b4cd"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a21be789f798adf9985f2432d3499b4cd">Tgstation.Server.Host.Jobs.IJobManager.RegisterOperation</a></div><div class="ttdeci">Task RegisterOperation(Job job, JobEntrypoint operation, CancellationToken cancellationToken)</div><div class="ttdoc">Registers a given Job and begins running it.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a7b02c8c3dadd90810a9eaa24712a0a20"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">Tgstation.Server.Api.Rights.RightsType</a></div><div class="ttdeci">RightsType</div><div class="ttdoc">The type of rights a model uses.</div><div class="ttdef"><b>Definition:</b> <a href="_rights_type_8cs_source.html#l00006">RightsType.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_acf2642afce6567c03b79876139a10a49"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">Tgstation.Server.Api.Rights.DreamDaemonRights</a></div><div class="ttdeci">DreamDaemonRights</div><div class="ttdoc">Rights for managing DreamDaemon.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_rights_8cs_source.html#l00009">DreamDaemonRights.cs:10</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00136">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a>, <a class="el" href="_tgstation_8_server_8_host_2_components_2_instance_8cs_source.html#l00032">Tgstation.Server.Host.Components.Instance.DifferentCoreExceptionMessage</a>, <a class="el" href="_tgstation_8_server_8_host_2_components_2_instance_8cs_source.html#l00112">Tgstation.Server.Host.Components.Instance.Instance()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00116">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_session_persistor_8cs_source.html#l00093">Tgstation.Server.Host.Components.Session.SessionPersistor.Load()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00096">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a21be789f798adf9985f2432d3499b4cd">Tgstation.Server.Host.Jobs.IJobManager.RegisterOperation()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph">
<area shape="rect" title=" " alt="" coords="5,247,244,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a1786942cc8a27d171bce120e6eed5a9b" title="Initializes a new instance of the Instance class." alt="" coords="310,5,537,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="292,247,555,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="1695,259,1886,300"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a1e73c7faa5f961369020355979f55ada" title="Load a saved ReattachInformation." alt="" coords="310,373,537,415"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a21be789f798adf9985f2432d3499b4cd" title="Registers a given Job and begins running it." alt="" coords="321,439,525,480"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="603,128,921,169"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aea6ea203494afd514530ef26724194fa" title="Starts all ISessionControllers." alt="" coords="639,371,885,412"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="627,305,897,347"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1323,289,1609,331"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="1003,123,1241,164"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1333,406,1599,462"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1323,533,1609,575"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a97b5cac3c59bff5f5dab4bd5e4620042" title="Handles a watchdog heartbeat." alt="" coords="986,407,1258,448"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="969,472,1275,513"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="993,188,1251,229"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation." alt="" coords="1677,457,1904,499"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1657,378,1924,434"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1984,457,2213,499"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2273,457,2483,499"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="1972,251,2225,307"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_async_delayer.html#a28ea9fb35caed002bf15a67b03d5e0c7" title="Create a Task that completes after a given timeSpan ." alt="" coords="1375,172,1557,213"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html#a8dd876c40ac37b38be7bbe71dbe0363f" title="Gets a IDmbProvider for a given CompileJob." alt="" coords="628,436,896,477"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#ad22fce8fc51129e9da203dcef2f7ab42" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="643,501,881,543"/>
</map>
</div>

</div>
</div>
<a id="ad1f7ac000da0491494324db1dce544a0" name="ad1f7ac000da0491494324db1dce544a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f7ac000da0491494324db1dce544a0">&#9670;&nbsp;</a></span>StopAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

</div>
</div>
<a id="ab4c51b6e88cc02dfa78070f5870b3b30" name="ab4c51b6e88cc02dfa78070f5870b3b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c51b6e88cc02dfa78070f5870b3b30">&#9670;&nbsp;</a></span>StopMonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; bool &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a>. Doesn't kill the servers. </p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the monitor was running, <code>false</code> otherwise.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00567">567</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  568</span>        {</div>
<div class="line"><span class="lineno">  569</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;StopMonitor&quot;</span>);</div>
<div class="line"><span class="lineno">  570</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  571</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  572</span>            var wasRunning = !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a>.IsCompleted;</div>
<div class="line"><span class="lineno">  573</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a>.Cancel();</div>
<div class="line"><span class="lineno">  574</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a>.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  575</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Stopped Monitor&quot;</span>);</div>
<div class="line"><span class="lineno">  576</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a>.Dispose();</div>
<div class="line"><span class="lineno">  577</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  578</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  579</span>            <span class="keywordflow">return</span> wasRunning;</div>
<div class="line"><span class="lineno">  580</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00141">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00146">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab4c51b6e88cc02dfa78070f5870b3b30_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab4c51b6e88cc02dfa78070f5870b3b30_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab4c51b6e88cc02dfa78070f5870b3b30_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab4c51b6e88cc02dfa78070f5870b3b30_icgraph">
<area shape="rect" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="943,39,1187,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="616,39,895,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="339,5,565,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog." alt="" coords="336,71,568,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,5,288,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0e4642f1b29fff6e830c654384f8813f" title="Handle a restart of the server." alt="" coords="18,71,275,112"/>
</map>
</div>

</div>
</div>
<a id="a49a9acdffdc9e7cd176f803b23e97ff4" name="a49a9acdffdc9e7cd176f803b23e97ff4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49a9acdffdc9e7cd176f803b23e97ff4">&#9670;&nbsp;</a></span>Terminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the watchdog.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7fded5c4b8aeb291ad5b1797a25eee14">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00377">377</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  378</span>        {</div>
<div class="line"><span class="lineno">  379</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  380</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">TerminateNoLock</a>(graceful, !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  381</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Core.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00161">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00101">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00384">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_cgraph">
<area shape="rect" title="Stops the watchdog." alt="" coords="5,118,237,159"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a777a45bdcc1be5005b5a3ef72618a04e" title="Asyncronously locks a semaphore ." alt="" coords="329,49,520,90"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="285,150,564,191"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_core_1_1_semaphore_slim_context.html#a600d8d0a279d2fe17d1f48c1a1bd17d4" title="Initializes a new instance of the SemaphoreSlimContext class." alt="" coords="645,5,898,61"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="628,85,915,126"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="612,150,931,191"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="629,215,914,257"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="649,281,893,322"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="979,150,1217,191"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_icgraph">
<area shape="rect" title="Stops the watchdog." alt="" coords="311,5,543,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0e4642f1b29fff6e830c654384f8813f" title="Handle a restart of the server." alt="" coords="5,5,263,47"/>
</map>
</div>

</div>
</div>
<a id="a6845304123ed975aec4de3dc79bf8551" name="a6845304123ed975aec4de3dc79bf8551"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6845304123ed975aec4de3dc79bf8551">&#9670;&nbsp;</a></span>TerminateNoLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementation of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog.">Terminate(bool, CancellationToken)</a>. Does not lock <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4" title="The SemaphoreSlim for the WatchdogBase.">synchronizationSemaphore</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the termination will be delayed until a reboot is detected in the active server's DMAPI and this function will return immediately.</td></tr>
    <tr><td class="paramname">announce</td><td>If <code>true</code> the termination will be announced using <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat.html">Chat</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00970">970</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  971</span>        {</div>
<div class="line"><span class="lineno">  972</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  973</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  974</span>            <span class="keywordflow">if</span> (!graceful)</div>
<div class="line"><span class="lineno">  975</span>            {</div>
<div class="line"><span class="lineno">  976</span>                var eventTask = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a">HandleNonRelayedEvent</a>(</div>
<div class="line"><span class="lineno">  977</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a></div>
<div class="line"><span class="lineno">  978</span>                        ? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogDetach</div>
<div class="line"><span class="lineno">  979</span>                        : <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogShutdown,</div>
<div class="line"><span class="lineno">  980</span>                    Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(),</div>
<div class="line"><span class="lineno">  981</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  982</span> </div>
<div class="line"><span class="lineno">  983</span>                var chatTask = announce ? <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Shutting down...&quot;</span>, cancellationToken) : Task.CompletedTask;</div>
<div class="line"><span class="lineno">  984</span> </div>
<div class="line"><span class="lineno">  985</span>                await eventTask.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30">StopMonitor</a>().ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  988</span> </div>
<div class="line"><span class="lineno">  989</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">LastLaunchParameters</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span>                await chatTask.ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  992</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  993</span>            }</div>
<div class="line"><span class="lineno">  994</span> </div>
<div class="line"><span class="lineno">  995</span>            <span class="comment">// merely set the reboot state</span></div>
<div class="line"><span class="lineno">  996</span>            var toKill = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  997</span>            <span class="keywordflow">if</span> (toKill != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  998</span>            {</div>
<div class="line"><span class="lineno">  999</span>                await toKill.SetRebootState(Session.RebootState.Shutdown, cancellationToken).ConfigureAwait(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1000</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Graceful termination requested&quot;</span>);</div>
<div class="line"><span class="lineno"> 1001</span>            }</div>
<div class="line"><span class="lineno"> 1002</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1003</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Could not gracefully terminate as there is no active controller!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1004</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ab4c51b6e88cc02dfa78070f5870b3b30"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor</a></div><div class="ttdeci">async Task&lt; bool &gt; StopMonitor()</div><div class="ttdoc">Stops MonitorLifetimes(CancellationToken). Doesn't kill the servers.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00567">WatchdogBase.cs:567</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00686">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleNonRelayedEvent()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00050">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00071">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00161">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00034">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00567">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00318">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00377">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_cgraph">
<area shape="rect" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="5,104,284,145"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="348,5,635,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3067474bf7404758391b6412e2f6454a" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="332,71,651,112"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1f6855c98ad2fd9d071eb31236630258" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="349,136,634,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="369,201,613,243"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#ac217567aa6bd7e43c8cfd976eee05aac" title="Handle a given eventType ." alt="" coords="699,71,937,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_icgraph">
<area shape="rect" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="616,39,895,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog." alt="" coords="339,5,565,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog." alt="" coords="336,71,568,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions." alt="" coords="5,5,288,47"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0e4642f1b29fff6e830c654384f8813f" title="Handle a restart of the server." alt="" coords="18,71,275,112"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a410f168d84f80c138450fb42f222ba01" name="a410f168d84f80c138450fb42f222ba01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a410f168d84f80c138450fb42f222ba01">&#9670;&nbsp;</a></span>autoStart</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> should <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog.">LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken)</a> in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync(CancellationToken)</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00136">136</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00343">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5f9cfb67111bbc5ec1d954e4ed4bf913" name="a5f9cfb67111bbc5ec1d954e4ed4bf913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f9cfb67111bbc5ec1d954e4ed4bf913">&#9670;&nbsp;</a></span>controllerDisposeSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SemaphoreSlim used for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context.">DisposeAndNullControllers</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00106">106</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00241">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a8becb1115fe1c09c84534c798466e03f" name="a8becb1115fe1c09c84534c798466e03f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8becb1115fe1c09c84534c798466e03f">&#9670;&nbsp;</a></span>diagnosticsIOManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager pointing to the Diagnostics directory. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00126">126</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00412">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5c39f385b06058f4699503b492d2b743" name="a5c39f385b06058f4699503b492d2b743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c39f385b06058f4699503b492d2b743">&#9670;&nbsp;</a></span>disposed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> has been <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a>'d. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00166">166</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00241">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>

</div>
</div>
<a id="a5768c37124d54e80c66dc63d28d0dea4" name="a5768c37124d54e80c66dc63d28d0dea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5768c37124d54e80c66dc63d28d0dea4">&#9670;&nbsp;</a></span>eventConsumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IEventConsumer that is not the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00111">111</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00686">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleNonRelayedEvent()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="abaf0a71134899c397cc88eb39a189ff0" name="abaf0a71134899c397cc88eb39a189ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaf0a71134899c397cc88eb39a189ff0">&#9670;&nbsp;</a></span>heartbeatsMissed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Tgstation.Server.Host.Components.Watchdog.WatchdogBase.heartbeatsMissed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of hearbeats missed. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00156">156</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01011">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHeartbeat()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>.</p>

</div>
</div>
<a id="a1688863ddcd7d0bbfa3ec13b7b015319" name="a1688863ddcd7d0bbfa3ec13b7b015319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1688863ddcd7d0bbfa3ec13b7b015319">&#9670;&nbsp;</a></span>jobManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00116">116</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00343">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a52038e1a769f1114c492c76640a6afc8" name="a52038e1a769f1114c492c76640a6afc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52038e1a769f1114c492c76640a6afc8">&#9670;&nbsp;</a></span>metadata</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00096">96</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00665">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00343">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a47a5f64148a117c561df7b0e7e1703e6" name="a47a5f64148a117c561df7b0e7e1703e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47a5f64148a117c561df7b0e7e1703e6">&#9670;&nbsp;</a></span>monitorCts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CancellationTokenSource Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource for the monitor loop. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00141">141</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00241">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00567">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

</div>
</div>
<a id="abfb7590db69ab59a040c1ac91c671d6d" name="abfb7590db69ab59a040c1ac91c671d6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfb7590db69ab59a040c1ac91c671d6d">&#9670;&nbsp;</a></span>monitorTask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Task running the monitor loop. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00146">146</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00384">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00567">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

</div>
</div>
<a id="a256c7fd5a04870388411185b46ff6fb8" name="a256c7fd5a04870388411185b46ff6fb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256c7fd5a04870388411185b46ff6fb8">&#9670;&nbsp;</a></span>releaseServers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the servers should be released instead of shutdown. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00161">161</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00384">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00377">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a72637a3ebe8925b7c3753416370ad83c" name="a72637a3ebe8925b7c3753416370ad83c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72637a3ebe8925b7c3753416370ad83c">&#9670;&nbsp;</a></span>remoteDeploymentManagerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRemoteDeploymentManagerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00131">131</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00665">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="aefe25fd33c4a6dfb4ea27b583a2286ea" name="aefe25fd33c4a6dfb4ea27b583a2286ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefe25fd33c4a6dfb4ea27b583a2286ea">&#9670;&nbsp;</a></span>restartRegistration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html">IRestartRegistration</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRestartRegistration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00121">121</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00241">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="af5c8949750c7c079faf8d438fde20c6c" name="af5c8949750c7c079faf8d438fde20c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c8949750c7c079faf8d438fde20c6c">&#9670;&nbsp;</a></span>status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Backing field for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb" title="The current WatchdogStatus.">Status</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00151">151</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

</div>
</div>
<a id="a7e6adcb942a9ff1bb7d11d738b98b6e4" name="a7e6adcb942a9ff1bb7d11d738b98b6e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e6adcb942a9ff1bb7d11d738b98b6e4">&#9670;&nbsp;</a></span>synchronizationSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The SemaphoreSlim for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00101">101</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00255">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00241">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00296">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00703">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00305">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00318">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00343">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00377">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a5a4b8311c8cbd7cb851d1ade3bc27e05" name="a5a4b8311c8cbd7cb851d1ade3bc27e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4b8311c8cbd7cb851d1ade3bc27e05">&#9670;&nbsp;</a></span>ActiveCompileJob</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a23f9971c8bc84a87cfaf08744eaaee0d">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00053">53</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00665">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, and <a class="el" href="_windows_watchdog_8cs_source.html#l00148">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNewDmbAvailable()</a>.</p>

</div>
</div>
<a id="a9affc2eeae2903d1bdb0fa81a6550fc4" name="a9affc2eeae2903d1bdb0fa81a6550fc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9affc2eeae2903d1bdb0fa81a6550fc4">&#9670;&nbsp;</a></span>ActiveLaunchParameters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The DreamDaemonLaunchParameters the active server is using.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00047">47</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   47</span>{ <span class="keyword">get</span>; <span class="keyword">protected</span> <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00255">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00281">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleNormalReboot()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00202">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="afee401fd5e0d23482b77498b6ec23a03" name="afee401fd5e0d23482b77498b6ec23a03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afee401fd5e0d23482b77498b6ec23a03">&#9670;&nbsp;</a></span>ActiveParametersUpdated</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TaskCompletionSource&lt;object&gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>TaskCompletionSource&lt;TResult&gt; that completes when <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters the active server is using.">ActiveLaunchParameters</a> are changed and we are running. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00061">61</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   61</span>{ <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00255">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a39f77bb87d63b1a1a50aac89ad909f29" name="a39f77bb87d63b1a1a50aac89ad909f29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f77bb87d63b1a1a50aac89ad909f29">&#9670;&nbsp;</a></span>AlphaIsActive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.AlphaIsActive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the alpha server is the active server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00044">44</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   44</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="abbdc59de3b3556a08bd111264527f369" name="abbdc59de3b3556a08bd111264527f369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbdc59de3b3556a08bd111264527f369">&#9670;&nbsp;</a></span>AsyncDelayer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_async_delayer.html">IAsyncDelayer</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.AsyncDelayer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAsyncDelayer for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00091">91</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   91</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aec24ff5e3b22b40e62f4a2443eb8cec9" name="aec24ff5e3b22b40e62f4a2443eb8cec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec24ff5e3b22b40e62f4a2443eb8cec9">&#9670;&nbsp;</a></span>Chat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IChatManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00076">76</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   76</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00431">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01011">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHeartbeat()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00106">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00293">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleNewDmbAvailable()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00384">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00703">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00609">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00318">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a401d41a1b1b805f553f53b35f46275ef" name="a401d41a1b1b805f553f53b35f46275ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401d41a1b1b805f553f53b35f46275ef">&#9670;&nbsp;</a></span>DmbFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DmbFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IDmbFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00086">86</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6548572ef5ab9d7b6b3aae8647a0a053" name="a6548572ef5ab9d7b6b3aae8647a0a053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6548572ef5ab9d7b6b3aae8647a0a053">&#9670;&nbsp;</a></span>LastLaunchParameters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The DreamDaemonLaunchParameters to be applied.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#adf8f73df0fe074af3363857bc43e63a5">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00050">50</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   50</span>{ <span class="keyword">get</span>; <span class="keyword">protected</span> <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00281">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleNormalReboot()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

</div>
</div>
<a id="a2143ec7079d0ffd42c76f61cf7b71cf6" name="a2143ec7079d0ffd42c76f61cf7b71cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2143ec7079d0ffd42c76f61cf7b71cf6">&#9670;&nbsp;</a></span>Logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ILogger&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a>&gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00071">71</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   71</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00665">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00412">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00632">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00241">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01011">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHeartbeat()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00106">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00148">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNewDmbAvailable()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00686">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleNonRelayedEvent()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00129">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNormalReboot()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00384">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00202">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_posix_watchdog_8cs_source.html#l00108">Tgstation.Server.Host.Components.Watchdog.PosixWatchdog.InitController()</a>, <a class="el" href="_posix_watchdog_8cs_source.html#l00086">Tgstation.Server.Host.Components.Watchdog.PosixWatchdog.InitialLink()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00253">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.InitialLink()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00703">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00217">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.PrepServerForLaunch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00609">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00318">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00567">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00185">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5bc3f8e6c5569555d358578e612a1920" name="a5bc3f8e6c5569555d358578e612a1920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc3f8e6c5569555d358578e612a1920">&#9670;&nbsp;</a></span>RebootState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract ? <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.RebootState</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00056">56</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a24eb5f0e32cd79487cd9bd80d5257abb" name="a24eb5f0e32cd79487cd9bd80d5257abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24eb5f0e32cd79487cd9bd80d5257abb">&#9670;&nbsp;</a></span>SessionControllerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.SessionControllerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionControllerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00081">81</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   81</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a3bafe5d390332f896cdaf43a8db55d" name="a5a3bafe5d390332f896cdaf43a8db55d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a3bafe5d390332f896cdaf43a8db55d">&#9670;&nbsp;</a></span>SessionPersistor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.SessionPersistor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionPersistor for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>. </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00066">66</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   66</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fa8be05b0c448ea097a70e5d8708ffb" name="a5fa8be05b0c448ea097a70e5d8708ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa8be05b0c448ea097a70e5d8708ffb">&#9670;&nbsp;</a></span>Status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current WatchdogStatus.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00033">33</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>        {</div>
<div class="line"><span class="lineno">   35</span>            <span class="keyword">get</span> =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a>;</div>
<div class="line"><span class="lineno">   36</span>            <span class="keyword">set</span></div>
<div class="line"><span class="lineno">   37</span>            {</div>
<div class="line"><span class="lineno">   38</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a> = value;</div>
<div class="line"><span class="lineno">   39</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Status set to {0}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a>);</div>
<div class="line"><span class="lineno">   40</span>            }</div>
<div class="line"><span class="lineno">   41</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_af5c8949750c7c079faf8d438fde20c6c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.status</a></div><div class="ttdeci">WatchdogStatus status</div><div class="ttdoc">Backing field for Status.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00151">WatchdogBase.cs:151</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00255">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00384">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00296">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00483">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00763">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00703">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00305">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00318">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00970">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/Watchdog/<a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
